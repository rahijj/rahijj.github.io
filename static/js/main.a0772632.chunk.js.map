{"version":3,"sources":["serviceWorker.js","components/Error/index.tsx","utils/indexDB.ts","components/D3Panels/helperFunctions.ts","components/D3Panels/Chapter1/panelData.ts","components/Filters/AreaIncEdu.tsx","components/D3Panels/Chapter1/Income.tsx","pages/d3-main/scroller.ts","components/Filters/AreaEdu.tsx","components/D3Panels/LockEffectFunc.tsx","components/D3Panels/Chapter2/FoodClusFunc.tsx","components/D3Panels/Chapter1/MissedPayments.tsx","components/Header/HeaderTop.tsx","components/Header/HeaderDashBoard.tsx","components/Header/Loading.tsx","pages/d3-main/index.tsx","actions/index.ts","components/Header/HeaderPort.tsx","pages/port-main/index.tsx","pages/Projects.tsx","pages/About.tsx","pages/Resume.tsx","routes.tsx","actions/core.ts","utils/localStorage.ts","reducers/index.ts","utils/debounce.ts","index.tsx"],"names":["isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","console","log","onUpdate","onSuccess","catch","error","errInfo","className","name","message","componentStack","saveRawData","rd","a","idb","upgrade","db","createObjectStore","put","loadRawData","get","raw_data","generateElements","passedData","selection","element","selectAll","data","d","i","join","enter","append","attr","update","exit","transition","duration","remove","generateAxis","bandDomain","linearDomain","bandRange","linearRange","d3","domain","range","showXAxis","axis","innerHeight","innerWidth","xLabel","select","call","wrapX","text","showYAxis","yLabel","margin","top","right","bottom","left","plotTitle","title","horzTranslate","empty","createAxis","showXGrid","getConfInt","array","n","length","mean","reduce","b","sd","Math","sqrt","map","x","pow","showtip","tooltipTable","tableBody","check","Object","entries","style","Number","toFixed","highlight","bandScale","linearScale","month","tooltipClass","t","Date","s","tooltip","table","on","changeRadius","e","highlightVertBar","translate","values","showLegend","ItemsColours","Items","leg","nt","showLegendDot","marginTop","width","each","word","words","split","reverse","line","lineNumber","y","dy","parseFloat","tspan","pop","push","node","getComputedTextLength","EduBucket","AreaIncEduFilter","set_filterAreaIncEdu","value","id","onChange","target","TestIncome","height","cardInd","isVisible","section","useState","filter_val","set_filter","filter_Comb","set_filterComb","filter_Income","set_filterIncome","filter_Education","set_filterEducation","filter_RDD","set_filterRDD","openFilter","set_openFilter","graphicFilter","set_graphic","Income","index","IncomeAgg","IncomeState","BelowMinWage","LowerLimit","UpperLimit","MAX_VALUE","agg","curr","lt_1","prefix","includes","i_0","undefined","panel","Spending","IncomeCI","eName","keys","forEach","helper","IncomeMean","ExpMean","passedIncomeCI","SpendingCI","SpendingMean","SpendingExpMean","passedSpendingCI","percentile_25","round","percentile_50","percentile_75","String","sort","FebRMean","tooltipSpendTable","xAxis","ExpPassedData","g","legend","legendDot","max","padding","makeLineMonth","datum","delay","area","y0","y1","tickValues","tickFormat","tickSize","yAxis","activeIndex","pan","useEffect","matchMedia","matches","scrollVis","zIndex","gridTemplateColumns","onClick","AreaIncEdu","scroller","container","els","startPos","sectionPositions","this","getBoundingClientRect","offset","sectionIndex","pos","AreaEduFilter","set_filterAreaEdu","ordering","TestShowLockEffect","filter_Round","q_key","LockEffect","Round","tooltipLockEffect","k1","k2","xLockEffectAxis","yLockEffectAxis","bandwidth","showLock","FoodClusFunc","assign","Ur1","Ur2","Rr1","Rr2","Food","fi_1","tooltipFood","r","xSubgroup","xSubgroup2","xFoodAxis","yFoodAxis","isNaN","R","key","FoodClus","MissedPayments","set_filterRound","labels_spend_7","spend_7","job_n","tooltipMissedPayments","order_by_ordering","a1","a2","AreaEdu","HeaderTop","src","alt","HeaderDashBoard","VisibleInd","SectionInd","openNav","set_openNav","NavBName","set_NavBName","stickClass","set_NavSticky","sticky","set_Sticky","nav","document","getElementById","offsetTop","to","href","Loading","loading","connect","dispatch","getRaw","getState","type","res","require","JSON","parse","setHeight","setWidth","setY","setVisibleInd","orient","setOrient","setCardInd","pageYOffset","onscroll","onresize","sec","temp","display","Header","filter","textTransform","MainComponent","children","HeaderPort","Projects","opacity","animationDuration","About","Resume","border","Routes","React","constructor","props","super","componentDidCatch","err","sendError","setState","render","store","Error","exact","path","component","MainPage","syncr","send","client_type","auth","payload","date","getTime","submitError","loadAuth","init_auth","token","str","localStorage","getItem","saveAuth","setItem","stringify","loadClientId","client_id","v4","loadSyncState","saveSyncState","sync_state","saveQueue","queue","saveSnapshot","last_snapshot","loadDB","queued","accept_snapshot","parseInt","connected","rootReducer","action","nextState","merges","Dynamic","state_copy","paths","delete","diff_action","new_writes","newQ","snapshot","debounce","f","wait","timeout","args","clearTimeout","setTimeout","apply","initial_state","createStore","reducer","applyMiddleware","thunkMiddleware","saveBounce","saveDB","subscribe","ReactDOM","URL","process","origin","addEventListener","fetch","response","contentType","headers","status","indexOf","ready","unregister","reload","checkValidServiceWorker","postMessage"],"mappings":"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","file":"static/js/main.a0772632.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react'\n\ninterface P {\n\terror: Error\n\terrInfo: React.ErrorInfo\n}\n\nexport default ({ error, errInfo }: P) => {\n\n\treturn <div className=\"error-page\">\n\t\tError!\n\n\t\t<div>{error.name}</div>\n\t\t<div>{error.message}</div>\n\t\t<div>{errInfo.componentStack}</div>\n\t</div>\n}","import * as idb from 'idb'\nimport { deleteDB } from 'idb'\n\nexport const clearRawData = () => {\n\ttry {\n\t\tidb\n\t\t\t.openDB(\"db\", 1, {\n\t\t\t\tupgrade(db) {\n\t\t\t\t\tdb.createObjectStore(\"raw_data\")\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then((db) => {\n\t\t\t\tdb.delete('raw_data', 'rd')\n\t\t\t})\n\n\t\tlocalStorage.removeItem(\"auth\")\n\t\tlocalStorage.removeItem(\"sync_state\")\n\t\tlocalStorage.removeItem(\"last_snapshot\")\n\t\tlocalStorage.removeItem(\"school_db\")\n\t}\n\tcatch (error) {\n\t\tconsole.error(error)\n\t}\n}\n\nexport const loadAuth = (): RootReducerState['auth'] => {\n\n\tlet init_auth: RootReducerState['auth'] = {\n\t\tid: undefined,\n\t\ttoken: undefined,\n\t\tclient_type: \"tech_demo\"\n\t};\n\n\ttry {\n\t\tconst str = localStorage.getItem(\"auth\")\n\t\tif (str === null) {\n\t\t\treturn init_auth;\n\t\t}\n\n\t\treturn JSON.parse(str);\n\t}\n\tcatch (err) {\n\t\tconsole.error(err);\n\t\treturn init_auth;\n\t}\n}\n\nexport const saveAuth = (auth: RootReducerState['auth']) => {\n\tlocalStorage.setItem(\"auth\", JSON.stringify(auth))\n}\n\nexport const saveRawData = async (rd: RawSurveyData) => {\n\tconsole.log('SAVE RAW DATA')\n\n\tconst db = await idb.openDB(\"db\", 1, {\n\t\tupgrade(db) {\n\t\t\tdb.createObjectStore(\"raw_data\")\n\t\t}\n\t})\n\tdb.put(\"raw_data\", rd, \"rd\")\n\t// .then((db) => {\n\n\t// \tif (db.objectStoreNames.length == 0) {\n\t// \t\tconsole.log('deleteDB')\n\t// \t\tidb.deleteDB('db').then(() => {\n\t// \t\t\tsaveRawData(rd)\n\t// \t\t})\n\t// \t}\n\t// \telse {\n\t// \t\tdb.put(\"raw_data\", rd, \"rd\")\n\t// \t}\n\t// })\n}\n\nexport const loadRawData = async () => {\n\n\ttry {\n\t\tconst db = await idb.openDB('db', 1, {\n\t\t\tupgrade(db) {\n\t\t\t\tdb.createObjectStore(\"raw_data\")\n\t\t\t}\n\t\t})\n\t\tconst raw_data = await db.get(\"raw_data\", \"rd\")\n\t\t// console.log('LOAD RAW DATA', raw_data, db)\n\t\treturn raw_data as RawSurveyData || {}\n\t}\n\tcatch (error) {\n\t\tconsole.error(error)\n\t\treturn {}\n\t}\n}\n","import * as d3 from 'd3'\n\nexport function generateElements(passedData: [string, any][], className: string,\n\tselection: d3.Selection<d3.BaseType, unknown, HTMLElement, any>, element: string = 'rect') {\n\n\t// const t = selection.transition().duration(900);\n\tselection.selectAll('.' + className)\n\t\t.data(passedData, (d, i) => i)\n\t\t.join(\n\t\t\tenter => enter.append(element)\n\t\t\t\t.attr('class', className)\n\t\t\t\t.attr('opacity', 0.9),\n\t\t\tupdate => update,\n\n\t\t\texit => exit\n\t\t\t\t.transition().duration(650)\n\t\t\t\t.attr('height', 0)\n\t\t\t\t.remove(),\n\t\t)\n}\nexport function generateVertBars(passedData: [string, any][], className: string,\n\tselection: d3.Selection<d3.BaseType, unknown, HTMLElement, any>, linearScale: any, element: string = 'rect') {\n\n\t// const t = selection.transition().duration(900);\n\tselection.selectAll('.' + className)\n\t\t.data(passedData, (d, i) => i)\n\t\t.join(\n\t\t\tenter => enter.append(element)\n\t\t\t\t.attr('class', className)\n\t\t\t\t.attr('opacity', 0.9)\n\t\t\t\t.attr('y', (d: any) => linearScale(d[1])),\n\n\t\t\tupdate => update,\n\n\t\t\texit => exit\n\t\t\t\t// .attr('width', 0)\n\t\t\t\t.remove(),\n\t\t)\n}\nexport function generateAxis(bandDomain: string[], linearDomain: [number, number], bandRange: [number, number], linearRange: [number, number]) {\n\tconst linearScale: any =\n\t\td3.scaleLinear()\n\t\t\t.domain(linearDomain)\n\t\t\t.range(linearRange)\n\n\tconst bandScale: any =\n\t\td3.scaleBand()\n\t\t\t.domain(bandDomain)\n\t\t\t.range(bandRange)\n\n\treturn [linearScale, bandScale]\n}\nexport function showXAxis(axis: any, selection: d3.Selection<d3.BaseType, unknown, HTMLElement, any>,\n\tinnerHeight: number = 0,\n\tinnerWidth: number = 0,\n\txLabel: string = \"\"\n) {\n\n\tselection.select('.xAxis')\n\t\t// .transition().duration(900)\n\t\t.call(axis)\n\n\tselection.select('.xAxis')\n\t\t.selectAll('.tick text')\n\t\t.call(wrapX, 50)\n\n\tselection.select('.xLabel')\n\t\t.attr('transform', `translate(${(innerWidth / 2)},${innerHeight + 35})`)\n\t\t.transition().duration(1000)\n\t\t.text(xLabel)\n\t\t.attr('opacity', 1);\n\n\n}\n\nexport function showXAxisMonth(axis: any, selection: d3.Selection<d3.BaseType, unknown, HTMLElement, any>,\n\tinnerHeight: number = 0,\n\tinnerWidth: number = 0,\n\txLabel: string = \"\"\n) {\n\tselection.select('.xAxis')\n\t\t.transition().duration(1000)\n\t\t.call(axis)\n\t// selection.select('.xAxis')\n\n\tselection.select('.xLabel')\n\t\t.attr('transform', `translate(${(innerWidth / 2)},${innerHeight + 35})`)\n\t\t.transition().duration(1000)\n\t\t.text(xLabel)\n\t\t.attr('opacity', 1);\n\n}\n\nexport function showYAxis(axis: any, selection: d3.Selection<d3.BaseType, unknown, HTMLElement, any>,\n\tinnerHeight: number = 0,\n\tinnerWidth: number = 0,\n\tyLabel: string = \"\",\n\tmargin: {\n\t\ttop: number;\n\t\tright: number;\n\t\tbottom: number;\n\t\tleft: number;\n\t} = { top: 20, right: 20, bottom: 20, left: 55 }\n) {\n\tconst t = selection.transition().duration(100);\n\n\tselection.select('.yAxis')\n\t\t.transition().duration(900)\n\t\t.call(axis)\n\t// .selectAll('.tick text')\n\t// .call(wrapY, 120)\n\n\t// selection.select('.yAxis')\n\t// \t.selectAll('.tick text')\n\t// \t.call(wrapY, 120)\n\n\tselection.select('.yLabel')\n\t\t.transition().duration(1000)\n\t\t.attr(\"transform\", \"rotate(-90)\")\n\t\t.attr(\"y\", 0 - margin.left)\n\t\t.attr(\"x\", 0 - (innerHeight / 2))\n\t\t.attr(\"dy\", \"1em\")\n\t\t.text(yLabel)\n\t\t.attr('opacity', 1)\n\n}\nexport function plotTitle(selection: d3.Selection<d3.BaseType, unknown, HTMLElement, any>,\n\tinnerWidth: number = 0,\n\ttitle: string = \"test\",\n\thorzTranslate: number = 0\n) {\n\tif (selection.select('.plotTitle').empty()) {\n\t\tselection.append('text')\n\t\t\t.attr('class', 'plotTitle');\n\t}\n\n\tselection.select('.plotTitle')\n\t\t.transition().duration(800)\n\t\t.attr('transform', `translate(${((innerWidth) / 2) + horzTranslate},${-10})`)\n\t\t.text(title)\n\t\t.attr('opacity', 1);\n}\n\nexport function createAxis(selection: d3.Selection<d3.BaseType, unknown, HTMLElement, any>, innerHeight: number = 0) {\n\n\tif (selection.select('.yAxis').empty()) {\n\t\tselection.append('g')\n\t\t\t.attr('class', 'yAxis');\n\n\t\tselection.append('text')\n\t\t\t.attr('class', 'yLabel');\n\t}\n\tif (selection.select('.xAxis').empty()) {\n\t\tselection.append('g')\n\t\t\t.attr('class', 'xAxis')\n\t\t\t.attr('transform', `translate(0,${innerHeight})`);\n\n\t\tselection.append('text')\n\t\t\t.attr('class', 'xLabel');\n\t}\n\telse {\n\t\tselection.select('.xAxis')\n\t\t\t.attr('transform', `translate(0,${innerHeight})`)\n\t};\n}\n\nexport function createGrid(selection: d3.Selection<d3.BaseType, unknown, HTMLElement, any>, innerHeight: number) {\n\n\tif (selection.select('.yGrid').empty()) {\n\t\tselection.append('g')\n\t\t\t.attr('class', 'yGrid')\n\t}\n\tif (selection.select('.xGrid').empty()) {\n\t\tselection.append('g')\n\t\t\t.attr('class', 'xGrid')\n\t\t\t.attr('transform', `translate(0,${innerHeight})`)\n\t}\n\telse {\n\t\tselection.select('.xGrid')\n\t\t\t.attr('transform', `translate(0,${innerHeight})`)\n\t};\n}\n\nexport function showXGrid(axis: any, selection: d3.Selection<d3.BaseType, unknown, HTMLElement, any>) {\n\tselection.select('.xGrid')\n\t\t.transition().duration(1000)\n\t\t.attr(\"color\", \"grey\")\n\t\t.attr('opacity', 0.4)\n\t\t.call(axis);\n}\nexport function showYGrid(axis: any, selection: d3.Selection<d3.BaseType, unknown, HTMLElement, any>) {\n\tselection.select('.yGrid')\n\t\t.transition().duration(1000)\n\t\t.attr(\"color\", \"grey\")\n\t\t.attr('opacity', 0.4)\n\t\t.call(axis)\n}\n\nexport function getConfInt(array: number[]) {\n\tconst n = array.length\n\tif (n !== 0) {\n\t\tconst mean = array.reduce((a, b) => a + b) / n\n\t\tconst sd = Math.sqrt(array.map(x => Math.pow(x - mean, 2)).reduce((a, b) => a + b) / n)\n\t\tconst CI_1 = mean + 1.96 * (sd / Math.sqrt(n))\n\t\tconst CI_2 = mean - 1.96 * (sd / Math.sqrt(n))\n\t\treturn [CI_1, CI_2]\n\t}\n\telse {\n\t\treturn [0, 0]\n\t}\n}\nexport function showtip(d: any, tooltipTable: Record<string, Record<string, string>>,\n\ttableBody: any) {\n\tlet match = d[0]\n\t// console.log('tip', d)\n\tif (match in tooltipTable) {\n\t\tlet check = 0;\n\t\tlet rowList = Object.entries(tooltipTable[match])\n\t\tgenerateElements(rowList, 'tr', tableBody, 'tr')\n\t\tlet rows = d3.selectAll(\".tr\")\n\t\tlet cells = rows.selectAll(\"td\")\n\t\t\t.data((d: any) => d)\n\t\t\t.join(\n\t\t\t\tenter => enter.append('td')\n\t\t\t\t\t.attr('class', 'td')\n\t\t\t\t\t.style('color', (d) => {\n\t\t\t\t\t\tif (check === 1) {\n\t\t\t\t\t\t\tcheck = 0\n\t\t\t\t\t\t\tif (Number(d) < 50) return '#ed5757';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (d === 'Count') {\n\t\t\t\t\t\t\tcheck = 1\n\t\t\t\t\t\t} else check = 0;\n\t\t\t\t\t\treturn 'white'\n\t\t\t\t\t})\n\t\t\t\t\t.text((d: any) => d),\n\t\t\t\tupdate => update\n\t\t\t\t\t.style('color', (d) => {\n\t\t\t\t\t\tif (check === 1) {\n\t\t\t\t\t\t\tcheck = 0\n\t\t\t\t\t\t\tif (Number(d) < 50) return '#ed5757';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (d === 'Count') {\n\t\t\t\t\t\t\tcheck = 1\n\t\t\t\t\t\t} else check = 0;\n\t\t\t\t\t\treturn 'white'\n\t\t\t\t\t})\n\t\t\t\t\t.text((d: any) => d),\n\t\t\t\texit => exit.remove(),\n\t\t\t)\n\t} else {\n\t\tgenerateElements([['rows', 1]], 'tr', tableBody, 'tr')\n\t\tlet rows = d3.selectAll(\".tr\")\n\t\tgenerateElements([['td', 1]], 'td', rows, 'td')\n\t\tlet cells = d3.selectAll(\".td\")\n\t\tcells.text((d[1]).toFixed(2) + '%')\n\t}\n}\nexport function highlight(data: [string, number][],\n\tselection: d3.Selection<d3.BaseType, unknown, HTMLElement, any>,\n\tbandScale: any,\n\tlinearScale: any,\n\tclassName: string = 'Point',\n\ttooltipTable: Record<string, Record<string, string>> = { 'Value': { 'Value': '0 ' } },\n\tmonth: boolean = false,\n\ttooltipClass: string = 'tooltip') {\n\n\t// generateElements(data, className, selection, 'circle')\n\tconst t = selection.transition().duration(1100);\n\n\tselection.selectAll('.' + className)\n\t\t.data(data, (d, i) => i)\n\t\t.join(\n\t\t\tenter => enter.append('circle')\n\t\t\t\t.attr('class', className)\n\t\t\t\t.attr('opacity', 1)\n\t\t\t\t.attr(\"cx\", (d: any) => {\n\t\t\t\t\tif (month) {\n\t\t\t\t\t\treturn bandScale(new Date(2020, d[0], 1))\n\t\t\t\t\t}\n\t\t\t\t\telse if (!month) {\n\t\t\t\t\t\treturn bandScale(d[0]);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.attr(\"cy\", (d: any) => { return linearScale(d[1]); })\n\t\t\t\t.call(s => s.transition(t)\n\t\t\t\t\t.attr('r', 7)),\n\t\t\tupdate => update\n\t\t\t\t.call(s => s.transition(t)\n\t\t\t\t\t.attr(\"cx\", (d: any) => {\n\t\t\t\t\t\tif (month) {\n\t\t\t\t\t\t\treturn bandScale(new Date(2020, d[0], 1))\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\treturn bandScale(d[0]);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.attr(\"cy\", (d: any) => { return linearScale(d[1]); })\n\t\t\t\t\t.attr('opacity', 1)\n\t\t\t\t\t.attr('r', 7)),\n\t\t\texit => exit\n\t\t\t\t// .attr('width', 0)\n\t\t\t\t// .transition().duration(100)\n\t\t\t\t.attr('r', 0)\n\t\t\t\t.remove(),\n\t\t)\n\n\tgenerateElements([['tooltip', 1]], tooltipClass, d3.selectAll(\"#vis\"), 'div')\n\tconst tooltip = d3.selectAll(\".\" + tooltipClass).style('display', 'none');\n\tgenerateElements([['table', 1]], 'table', tooltip, 'table')\n\tconst table = tooltip.selectAll(\".table\")\n\t//@ts-ignore\n\tgenerateElements([['tbody', 1]], 'tbody', table, 'tbody')\n\tconst tableBody = table.selectAll(\".tbody\")\n\n\tselection.selectAll('.' + className)\n\t\t.on('mouseover', (d: any) => {\n\t\t\tchangeRadius(d)\n\t\t\tshowtip(d, tooltipTable, tableBody)\n\t\t\ttooltip.style(\"left\", () => {\n\t\t\t\tif (month) {\n\t\t\t\t\treturn (bandScale(new Date(2020, d[0], 1)) - 20 + \"px\")\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn (bandScale(d[0]) - 20 + \"px\")\n\t\t\t\t}\n\t\t\t})\n\t\t\t\t.style(\"top\", linearScale(d[1]) + 85 + \"px\")\n\t\t\t\t.style('display', 'block');\n\t\t})\n\t\t.on(\"mouseout\", () => {\n\t\t\ttooltip.style('display', 'none')\n\t\t\tselection.selectAll('.' + className)\n\t\t\t\t.attr('r', 7)\n\t\t})\n\n\tconst changeRadius = (d: any) => {\n\t\td3.selectAll('.' + className)\n\t\t\t.attr(\"r\", (e) => { let temp; (d === e) ? temp = 15 : temp = 7; return temp })\n\t}\n}\n\n\ninterface highlightBarType {\n\tselection: d3.Selection<d3.BaseType, unknown, HTMLElement, any>,\n\tbandScale: any,\n\tlinearScale: any,\n\tclassName: string,\n\tmargin: {\n\t\ttop: number;\n\t\tright: number;\n\t\tbottom: number;\n\t\tleft: number;\n\t},\n\ttooltipTable: Record<string, Record<string, string>>,\n\ttooltipClass?: string,\n\ttranslate?: number\n}\nexport function highlightBar({\n\tselection,\n\tbandScale,\n\tlinearScale,\n\tclassName = 'BarGraph',\n\tmargin = { top: 20, right: 20, bottom: 20, left: 55 },\n\ttooltipTable = { 'Value': { 'Value': '0 ' } },\n\ttooltipClass = 'tooltip' }: highlightBarType) {\n\n\tgenerateElements([['tooltip', 1]], tooltipClass, d3.selectAll(\"#vis\"), 'div')\n\tconst tooltip = d3.selectAll(\".\" + tooltipClass).style('display', 'none');\n\tgenerateElements([['table', 1]], 'table', tooltip, 'table')\n\tconst table = tooltip.selectAll(\".table\")\n\t//@ts-ignore\n\tgenerateElements([['tbody', 1]], 'tbody', table, 'tbody')\n\tconst tableBody = table.selectAll(\".tbody\")\n\n\tselection.selectAll('.' + className)\n\t\t.on('mouseover', (d: any) => {\n\t\t\tshowtip(d, tooltipTable, tableBody)\n\t\t\ttooltip.style(\"left\", linearScale(d[1]) + margin.left + 5 + \"px\")\n\t\t\t\t.style(\"top\", bandScale(d[0]) + margin.top + \"px\")\n\t\t\t\t.style('display', 'block');\n\t\t})\n\t\t.on(\"mouseout\", () => {\n\t\t\ttooltip.style('display', 'none')\n\t\t})\n}\n\nexport function highlightVertBar({\n\tselection,\n\tbandScale,\n\tlinearScale,\n\tclassName = 'BarGraph',\n\tmargin = { top: 20, right: 20, bottom: 20, left: 55 },\n\ttooltipTable = { 'Value': { 'Value': '0 ' } },\n\ttooltipClass = 'tooltip',\n\ttranslate = 0 }: highlightBarType) {\n\n\tgenerateElements([['tooltip', 1]], tooltipClass, d3.selectAll(\"#vis\"), 'div')\n\tconst tooltip = d3.selectAll(\".\" + tooltipClass).style('display', 'none');\n\tgenerateElements([['table', 1]], 'table', tooltip, 'table')\n\tconst table = tooltip.selectAll(\".table\")\n\t//@ts-ignore\n\tgenerateElements([['tbody', 1]], 'tbody', table, 'tbody')\n\tconst tableBody = table.selectAll(\".tbody\")\n\n\tselection.selectAll('.' + className)\n\t\t.on('mouseover', (d: any) => {\n\t\t\tshowtip(Object.values(d), tooltipTable, tableBody)\n\t\t\ttooltip.style(\"top\", linearScale(linearScale.domain()[0] + Object.values(d)[1]) + \"px\")\n\t\t\t\t.style(\"left\", bandScale(Object.values(d)[0]) + translate + margin.left + 15 + \"px\")\n\t\t\t\t.style('display', 'block');\n\t\t})\n\t\t.on(\"mouseout\", () => {\n\t\t\ttooltip.style('display', 'none')\n\t\t})\n}\n\nexport function showLegend(ItemsColours: Record<string, string>, selection: any) {\n\n\tconst Items = Object.entries(ItemsColours)\n\tconst leg = selection.selectAll('.legend')\n\n\tgenerateElements(Items, 'legendCircle', leg, 'circle')\n\tgenerateElements(Items, 'legendText', leg, 'text')\n\n\tlet n = -15;\n\tleg.selectAll('.legendCircle')\n\t\t.transition().duration(900)\n\t\t.attr('transform', () => {\n\t\t\tn += 15\n\t\t\treturn (`translate(${0},${n})`)\n\t\t})\n\t\t.attr(\"r\", 6)\n\t\t.style(\"fill\", (d: any) => d[1])\n\n\tlet nt = -15;\n\tleg.selectAll('.legendText')\n\t\t.transition().duration(500)\n\t\t.attr('transform', () => {\n\t\t\tnt += 15\n\t\t\treturn (`translate(${20},${nt})`)\n\t\t})\n\t\t.attr('opacity', 0)\n\t\t.text((d: any) => d[0])\n\t\t.attr('opacity', 1)\n\t\t.attr(\"dominant-baseline\", \"middle\")\n}\n\nexport function showLegendDot(ItemsColours: Record<string, string>, selection: any,\n\tmarginTop: boolean = false) {\n\n\tconst Items = Object.entries(ItemsColours)\n\tconst leg = selection.selectAll('.legend')\n\n\tgenerateElements(Items, 'legendDot', leg, 'line')\n\tgenerateElements(Items, 'legendDotText', leg, 'text')\n\n\tlet n = -15;\n\tlet nt = -15;\n\n\tif (marginTop == true) {\n\t\tn = 0\n\t\tnt = 0\n\t}\n\tleg.selectAll('.legendDot')\n\t\t.attr('id', 'legendShape')\n\t\t.attr('transform', () => {\n\t\t\tn += 15\n\t\t\treturn (`translate(${-12},${n})`)\n\t\t})\n\t\t.attr(\"x1\", 0)\n\t\t.attr(\"y1\", 0)\n\t\t.transition().duration(900)\n\t\t.attr(\"x2\", 28)\n\t\t.attr(\"y2\", 0)\n\t\t.style(\"stroke-dasharray\", \"5,5\")//dashed array for line\n\t\t.style('stroke-width', '3px')\n\t\t.style(\"stroke\", (d: any) => d[1]);\n\n\tleg.selectAll('.legendDotText')\n\t\t.attr('id', 'legendText')\n\t\t.attr('transform', () => {\n\t\t\tnt += 15\n\t\t\treturn (`translate(${20},${nt})`)\n\t\t})\n\t\t.attr('opacity', 0)\n\t\t.transition().duration(500)\n\t\t.text((d: any) => d[0])\n\t\t.attr('opacity', 1)\n\t\t.attr(\"dominant-baseline\", \"middle\")\n}\n\nexport function wrapY(text: any, width: any) {\n\ttext.each((d: any, i: any, n: any) => {\n\t\tvar text = d3.select(n[i]),\n\t\t\twords = text.text().split(/\\s+/).reverse(),\n\t\t\tword,\n\t\t\tline: string[] = [],\n\t\t\tlineNumber = 0,\n\t\t\tlineHeight = 0.7, // ems\n\t\t\ty = text.attr(\"y\"),\n\t\t\tdy = parseFloat(text.attr(\"dy\")),\n\t\t\ttspan = text.text(null).append(\"tspan\").attr(\"x\", -9).attr(\"y\", y).attr(\"dy\", dy + \"em\");\n\t\twhile (word = words.pop()) {\n\t\t\tline.push(word);\n\t\t\ttspan.text(line.join(\" \"));\n\t\t\t//@ts-ignore\n\t\t\tif (tspan.node().getComputedTextLength() > width) {\n\t\t\t\tline.pop();\n\t\t\t\ttspan.text(line.join(\" \"));\n\t\t\t\tline = [word];\n\t\t\t\ttspan = text.append(\"tspan\").attr(\"x\", -9).attr(\"y\", y).attr(\"dy\", ++lineNumber * lineHeight + dy + \"em\").text(word);\n\t\t\t}\n\t\t}\n\t});\n}\n\nexport function wrapX(text: any, width: any) {\n\ttext.each((d: any, i: any, n: any) => {\n\t\tvar text = d3.select(n[i]),\n\t\t\twords = text.text().split(/\\s+/).reverse(),\n\t\t\tword,\n\t\t\tline: string[] = [],\n\t\t\tlineNumber = 0,\n\t\t\tlineHeight = 1.1, // ems\n\t\t\ty = text.attr(\"y\"),\n\t\t\tdy = parseFloat(text.attr(\"dy\")),\n\t\t\ttspan = text.text(null).append(\"tspan\").attr(\"x\", 0).attr(\"y\", y).attr(\"dy\", dy + \"em\");\n\t\twhile (word = words.pop()) {\n\t\t\tline.push(word);\n\t\t\ttspan.text(line.join(\" \"));\n\t\t\t//@ts-ignore\n\t\t\tif (tspan.node().getComputedTextLength() > width) {\n\t\t\t\tline.pop();\n\t\t\t\ttspan.text(line.join(\" \"));\n\t\t\t\tline = [word];\n\t\t\t\ttspan = text.append(\"tspan\").attr(\"x\", 0).attr(\"y\", y).attr(\"dy\", ++lineNumber * lineHeight + dy + \"em\").text(word);\n\t\t\t}\n\t\t}\n\t});\n}","const EduBucket: Record<string, number[]> = {\n\t'Dropped out Before Matric': [1, 2],\n\t'Matric': [3],\n\t'More than Matric': [4, 5, 6, 7, 8, 9]\n}\n\ninterface SpendingType {\n\tdata: RootReducerState['raw_data']\n\tfilter_val: string,\n\tfilter_Income?: string,\n\tfilter_Education?: string,\n\tfilter_RDD?: string\n}\nexport function Spending({ data, filter_val = 'Overall',\n\tfilter_Income = 'F0', filter_Education = 'None', filter_RDD = 'None' }: SpendingType) {\n\n\tconst SpendingState: Record<string, number[]> = {\n\t\t'February': [],\n\t\t'FebruaryR1': [],\n\t\t'FebruaryR2': [],\n\t\t'May': [],\n\t\t'August': [],\n\t\t'AugExp': []\n\t};\n\n\tlet LowerLimit: number = 0;\n\tlet UpperLimit: number = Number.MAX_VALUE;\n\n\tif (filter_Income === 'F1') {\n\t\tLowerLimit = 0;\n\t\tUpperLimit = 17500;\n\t}\n\telse if (filter_Income === 'F2') {\n\t\tLowerLimit = 17500;\n\t\tUpperLimit = 50000;\n\t}\n\telse if (filter_Income === 'F3') {\n\t\tLowerLimit = 50000;\n\t\tUpperLimit = Number.MAX_VALUE;\n\t}\n\n\t// console.log(Object.values(data).length)\n\tconst Spend = Object.values(data)\n\t\t.reduce((agg: Record<string, number[]>, curr: any) => {\n\t\t\tif ((filter_val !== \"Overall\" ? curr.lt_1 === filter_val : true)) {\n\n\t\t\t\tif ((filter_RDD !== \"None\" ? curr.prefix == filter_RDD : true) &&\n\t\t\t\t\t(filter_Education !== \"None\" ? EduBucket[filter_Education].includes(curr.i_0) : true)) {\n\n\t\t\t\t\tif (curr['spend_1'] !== undefined && curr['spend_1'] > 0\n\t\t\t\t\t\t&& curr['i_6'] > LowerLimit && curr['i_6'] <= UpperLimit) {\n\n\t\t\t\t\t\tagg['February'].push(curr['spend_1']);\n\n\t\t\t\t\t\tif (curr['Round'] == 1) {\n\t\t\t\t\t\t\tif ((curr['spend_2_1'] !== undefined) && (curr['spend_2_1'] > 0)) {\n\t\t\t\t\t\t\t\tagg['May'].push(curr['spend_2_1'])\n\t\t\t\t\t\t\t\tagg['FebruaryR1'].push(curr['spend_1']);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (curr['Round'] == 2) {\n\t\t\t\t\t\t\tif ((curr['spend_2_1'] !== undefined) && (curr['spend_2_1'] > 0)) {\n\t\t\t\t\t\t\t\tagg['August'].push(curr['spend_2_1'])\n\t\t\t\t\t\t\t\tagg['FebruaryR2'].push(curr['spend_1']);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (curr['spend_3_1'] != undefined && curr['spend_3_1'] >= 0) {\n\t\t\t\t\t\t\t\tagg['AugExp'].push(curr['spend_3_1'])\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn agg\n\t\t}, SpendingState);\n\treturn Spend\n}\n\ninterface IncomeType {\n\tdata: RootReducerState['raw_data']\n\tfilter_val: string,\n\tfilter_Income?: string,\n\tfilter_Education?: string,\n\tfilter_RDD?: string\n}\nexport function IncomeData({ data, filter_val = 'Overall',\n\tfilter_Income = 'F0', filter_Education = 'None', filter_RDD = 'None' }: IncomeType) {\n\n\tconst IncomeMonths: Record<string, number[]> = {\n\t\t'February': [],\n\t\t'FebruaryR1': [],\n\t\t'FebruaryR2': [],\n\t\t'MayFeb': [],\n\t\t'AugFeb': [],\n\t\t'May': [],\n\t\t'August': [],\n\t\t'AugExp': []\n\t};\n\tconst BelowMinWage: Record<string, number> = {\n\t\t'February': 0,\n\t\t'May': 0,\n\t\t'August': 0\n\t};\n\tconst IncomeState: InitiState = {\n\t\tIncome: IncomeMonths,\n\t\tBelowMinWage: BelowMinWage\n\t};\n\ttype InitiState = {\n\t\tIncome: Record<string, number[]>\n\t\tBelowMinWage: Record<string, number>\n\t}\n\tlet LowerLimit: number = 0;\n\tlet UpperLimit: number = Number.MAX_VALUE;\n\n\tif (filter_Income === 'F1') {\n\t\tLowerLimit = 0;\n\t\tUpperLimit = 17500;\n\t}\n\telse if (filter_Income === 'F2') {\n\t\tLowerLimit = 17500;\n\t\tUpperLimit = 50000;\n\t}\n\telse if (filter_Income === 'F3') {\n\t\tLowerLimit = 50000;\n\t\tUpperLimit = Number.MAX_VALUE;\n\t}\n\tconst IncomeAgg = Object.values(data)\n\t\t.reduce((agg: InitiState, curr: any) => {\n\t\t\tif ((filter_val !== \"Overall\" ? curr.lt_1 === filter_val : true)) {\n\t\t\t\tif ((filter_RDD !== \"None\" ? curr.prefix == filter_RDD : true) &&\n\t\t\t\t\t(filter_Education !== \"None\" ? EduBucket[filter_Education].includes(curr.i_0) : true)) {\n\n\t\t\t\t\tif (curr['i_6'] !== undefined && curr['i_6'] > LowerLimit\n\t\t\t\t\t\t&& curr['i_6'] <= UpperLimit) {\n\n\t\t\t\t\t\tif (curr['i_6'] < 17500) agg['BelowMinWage']['February'] += 1\n\t\t\t\t\t\tagg['Income']['February'].push(curr['i_6']);\n\n\t\t\t\t\t\tif (curr['i_8'] !== undefined && curr['i_8'] >= 0) {\n\t\t\t\t\t\t\tif (curr['Round'] == 1) {\n\t\t\t\t\t\t\t\tagg['Income']['FebruaryR1'].push(curr['i_6']);\n\t\t\t\t\t\t\t\tagg['Income']['May'].push(curr['i_8'])\n\t\t\t\t\t\t\t\tif (curr['i_8'] < 17500) agg['BelowMinWage']['May'] += 1\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (curr['Round'] == 2) {\n\t\t\t\t\t\t\t\tagg['Income']['FebruaryR2'].push(curr['i_6']);\n\t\t\t\t\t\t\t\tagg['Income']['August'].push(curr['i_8'])\n\n\t\t\t\t\t\t\t\tif (curr['i_9_6'] >= 0) {\n\t\t\t\t\t\t\t\t\tagg['Income']['AugExp'].push(curr['i_9_6'])\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (curr['i_8'] < 17500)\n\t\t\t\t\t\t\t\t\tagg['BelowMinWage']['August'] += 1\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (curr['i_8_6'] !== undefined && curr['i_8_6'] >= 0) {\n\n\t\t\t\t\t\t\tif (curr['Round'] == 1) {\n\t\t\t\t\t\t\t\tagg['Income']['MayFeb'].push(curr['i_8_6'])\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (curr['Round'] == 2) {\n\t\t\t\t\t\t\t\tagg['Income']['AugFeb'].push(curr['i_8_6'])\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn agg\n\t\t}, IncomeState);\n\t// console.log('IA', IncomeAgg)\n\treturn IncomeAgg\n}\n\nexport function Jobs(data: RootReducerState['raw_data'], filter_val: string = 'Overall',\n\tfilter_Round: number = 1, filter_Education: string = 'None', filter_RDD: string = 'None') {\n\n\tconst labels_i_1: Record<number, string> = {\n\t\t'1': 'Daily Wage',\n\t\t'2': 'Salaried Employee',\n\t\t'3': 'Own (Family) Business',\n\t\t'4': 'School Owner',\n\t\t'5': 'Own/ Rent Agricultural Land',\n\t\t'6': 'Own/ Rent Livestock',\n\t\t'7': 'Unemployed',\n\t\t'8': 'Retired',\n\t\t'-88': 'Other'\n\t}\n\tconst exclude: string[] =\n\t\t[\"Respondent Dropped out\",\n\t\t\t\"Refused to answer\",\n\t\t\t\"Don't know\",\n\t\t\t\"Other\"]\n\n\tconst JobCount: Record<string, number> = {}\n\tconst LostJobCount: Record<string, number> = {}\n\tconst BorrowedMoneyCount: Record<string, number> = {}\n\tconst LosJobType: Record<string, Record<string, number>> = {}\n\tconst initialState: InitiState = {\n\t\t'JobCount': JobCount,\n\t\t'LostJobCount': LostJobCount,\n\t\t'BorrowedMoneyCount': BorrowedMoneyCount,\n\t\t'LostJobType': LosJobType\n\t}\n\ttype InitiState = {\n\t\tJobCount: Record<string, number>\n\t\tLostJobCount: Record<string, number>\n\t\tBorrowedMoneyCount: Record<string, number>\n\t\tLostJobType: Record<string, Record<string, number>>\n\t}\n\n\tlet job_n = 0;\n\tconst Jobs = Object.values(data).reduce((agg: InitiState, curr: any) => {\n\n\t\tif ((curr['i_2'] !== undefined) && !(exclude.includes(curr['i_2']))) {\n\t\t\tif ((filter_val !== \"Overall\" ? curr.lt_1 === filter_val : true)) {\n\t\t\t\tif ((curr['Round'] == filter_Round) && (filter_RDD !== \"None\" ? curr.prefix == filter_RDD : true)\n\t\t\t\t\t&& (filter_Education !== \"None\" ? EduBucket[filter_Education].includes(curr.i_0) : true)) {\n\n\t\t\t\t\tagg['JobCount'][curr['i_2']] = (agg['JobCount'][curr['i_2']] || 0) + 1\n\n\t\t\t\t\tif (curr['i_3'] === \"No, I am currently unemployed/ laid off\") {\n\t\t\t\t\t\tagg['LostJobCount'][curr['i_2']] = (agg['LostJobCount'][curr['i_2']] || 0) + 1;\n\n\t\t\t\t\t\t// agg['LostJobType'][curr['i_2']] = {}\n\t\t\t\t\t\t// if ((curr['i_1'] !== undefined)) {\n\t\t\t\t\t\t// \tcurr['i_1'].split(' ').forEach((e: number) => {\n\t\t\t\t\t\t// \t\tagg['LostJobType'][curr['i_2']][labels_i_1[e]] = (agg['LostJobType'][curr['i_2']][labels_i_1[e]] || 0) + 1;\n\t\t\t\t\t\t// \t})\n\t\t\t\t\t\t// }\n\t\t\t\t\t}\n\t\t\t\t\tif (curr.spend_4 == 'Yes') {\n\t\t\t\t\t\tagg['BorrowedMoneyCount'][curr['i_2']] = (agg['BorrowedMoneyCount'][curr['i_2']] || 0) + 1\n\t\t\t\t\t}\n\t\t\t\t\tjob_n += 1\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn agg\n\n\t}, initialState)\n\n\t// Object.keys(Jobs['JobCount']).forEach((e) => Jobs['JobCount'][e] = 100 * Jobs['JobCount'][e] / job_n)\n\t// Object.keys(Jobs['LostJobCount']).forEach((e) => Jobs['LostJobCount'][e] = 100 * Jobs['LostJobCount'][e] / job_n)\n\treturn Jobs\n}\n\nexport function JobType(data: RootReducerState['raw_data'], filter_val: string = 'Overall',\n\tfilter_Round: number = 1, filter_Education: string = 'None', filter_RDD: string = 'None') {\n\n\tconst labels_i_1: Record<number, string> = {\n\t\t'1': 'Daily Wage',\n\t\t'2': 'Salaried Employee',\n\t\t'3': 'Own (Family) Business',\n\t\t'4': 'School Owner',\n\t\t'5': 'Own/ Rent Agricultural Land',\n\t\t'6': 'Own/ Rent Livestock',\n\t\t'7': 'Unemployed',\n\t\t'8': 'Retired',\n\t\t'-88': 'Other'\n\t}\n\tconst JobCount: Record<string, number> = {}\n\tconst LostJobCount: Record<string, number> = {}\n\tconst initialState: InitiState = {\n\t\tJobCount: JobCount,\n\t\tLostJobCount: LostJobCount\n\t}\n\ttype InitiState = {\n\t\tJobCount: Record<string, number>\n\t\tLostJobCount: Record<string, number>\n\t}\n\tlet job_n = 0;\n\tconst Jobs = Object.values(data).reduce((agg: InitiState, curr: any) => {\n\n\t\tif ((curr['i_1'] !== undefined) && (filter_val !== \"Overall\" ? curr.lt_1 === filter_val : true)) {\n\n\t\t\tif ((curr['Round'] == filter_Round) && (filter_RDD !== \"None\" ? curr.prefix == filter_RDD : true)\n\t\t\t\t&& (filter_Education !== \"None\" ? EduBucket[filter_Education].includes(curr.i_0) : true)) {\n\n\t\t\t\tcurr['i_1'].split(' ').forEach((e: number) => {\n\t\t\t\t\tif (labels_i_1[e] != undefined) {\n\t\t\t\t\t\tagg['JobCount'][labels_i_1[e]] = (agg['JobCount'][labels_i_1[e]] || 0) + 1;\n\n\t\t\t\t\t\tif (e == 7 || e == 8) {\n\t\t\t\t\t\t\tif (curr['i_3'] !== \"No, I am currently unemployed/ laid off\") {\n\t\t\t\t\t\t\t\tagg['LostJobCount'][labels_i_1[e]] = (agg['LostJobCount'][labels_i_1[e]] || 0) + 1\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (curr['i_3'] === \"No, I am currently unemployed/ laid off\") {\n\t\t\t\t\t\t\t\tagg['LostJobCount'][labels_i_1[e]] = (agg['LostJobCount'][labels_i_1[e]] || 0) + 1\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tjob_n += 1\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t\treturn agg\n\n\t}, initialState)\n\n\treturn Jobs\n}\n\nexport function MissedPayments(data: RootReducerState['raw_data'], filter_val: string = 'Overall',\n\tfilter_Round: number = 1, filter_Education: string = 'None', filter_RDD: string = 'None') {\n\n\tconst labels_spend_7: Record<number, string> = {\n\t\t'1': 'Tick 1',\n\t\t'2': 'Tick 2',\n\t\t'3': 'Tick 3',\n\t\t'4': 'Tick 4',\n\t\t'5': 'Tick 5',\n\t\t'6': 'Tick 6',\n\t\t'7': 'Tick 7',\n\t\t'8': 'Tick 8',\n\t\t'9': 'Tick 9',\n\t\t'10': 'Tick 10',\n\t\t'11': 'Tick 11',\n\t\t'-90': 'Tick -99'\n\t}\n\tconst initialState: Record<string, number> = {}\n\n\tlet n = 0;\n\tconst Missed = Object.values(data).reduce((agg: Record<string, number>, curr: any) => {\n\n\t\tif ((curr.spend_7 !== undefined) && (filter_val !== \"Overall\" ? curr.lt_1 === filter_val : true)) {\n\n\t\t\tif ((curr['Round'] == filter_Round) && (filter_RDD !== \"None\" ? curr.prefix == filter_RDD : true)\n\t\t\t\t&& (filter_Education !== \"None\" ? EduBucket[filter_Education].includes(curr.i_0) : true)) {\n\n\t\t\t\tcurr.spend_7.split(' ').forEach((e: number) => {\n\t\t\t\t\tif ((labels_spend_7[e] != undefined) && (e > 0)) {\n\t\t\t\t\t\tagg[labels_spend_7[e]] = (agg[labels_spend_7[e]] || 0) + 1;\n\t\t\t\t\t\tn += 1\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t\treturn agg\n\n\t}, initialState)\n\n\t// Object.keys(Missed).forEach((e) => Missed[e] = 100 * Missed[e] / n)\n\n\treturn Missed\n}","import React from 'react'\n\ninterface P {\n\tset_filterAreaIncEdu: Function\n\tvalue: string\n}\n\nconst AreaIncEduFilter: React.FC<P> = ({ set_filterAreaIncEdu, value }) => {\n\n\treturn <label className='FiltLab'>Filters\n\t<select id='CombFilterDropdown' className='Filter' onChange={e => set_filterAreaIncEdu(e.target.value)} value={value} >\n\t\t\t<option value=\"None\">None</option>\n\t\t\t<option value='Rural'>Rural</option>\n\t\t\t<option value='Urban'>Urban</option>\n\t\t\t<option value='F1'>Rs 0 - Rs 17.5k</option>\n\t\t\t<option value='F2'>Rs.17.5k - Rs 50k</option>\n\t\t\t<option value='Dropped out Before Matric'>Dropped out before Matric</option>\n\t\t\t<option value='Matric'>Matric</option>\n\t\t\t<option value='More than Matric'>More than Matric</option>\n\t\t</select>\n\t</label>\n\n}\nexport default AreaIncEduFilter\n","import React, { useEffect, useRef, useState } from 'react'\nimport * as d3 from 'd3'\nimport * as helper from '../helperFunctions'\nimport { max, tree } from 'd3'\nimport * as panel from './panelData'\nimport * as filter from 'components/Filters/Filters'\nimport AreaIncEduFilter from 'components/Filters/AreaIncEdu'\n\ninterface P {\n\twidth: number\n\theight: number\n\tcardInd: number\n\tdata: RootReducerState['raw_data']\n\tisVisible: boolean\n\tsection: string\n}\nconst TestIncome: React.FC<P> = ({ width, height, data, cardInd, isVisible, section }) => {\n\n\tconst [filter_val, set_filter] = useState(\"Overall\")\n\tconst [filter_Comb, set_filterComb] = useState(\"None\")\n\tconst [filter_Income, set_filterIncome] = useState(\"F0\")\n\tconst [filter_Education, set_filterEducation] = useState(\"None\")\n\tconst [filter_RDD, set_filterRDD] = useState(\"None\")\n\tconst [openFilter, set_openFilter] = useState('0vh')\n\tconst [graphicFilter, set_graphic] = useState(999)\n\tlet margin = { top: 40, right: 20, bottom: 20, left: 45 }\n\tlet innerWidth = width - margin.left - margin.right\n\tlet innerHeight = height - margin.top - margin.bottom;\n\n\tfunction Income(index: number) {\n\n\t\tconst IncomeAgg = panel.IncomeData({ data: data, filter_val: filter_val, filter_Income: filter_Income, filter_Education: filter_Education, filter_RDD: filter_RDD })\n\t\tconst Spending = panel.Spending({ data: data, filter_val: filter_val, filter_Income: filter_Income, filter_Education: filter_Education, filter_RDD: filter_RDD })\n\t\tconst IncomeCI: Record<number, number[]> = {}\n\t\tconst eName: Record<string, number> = {\n\t\t\t'February': 1,\n\t\t\t'MayFeb': 4,\n\t\t\t'AugFeb': 7,\n\t\t\t'AugExp': 9\n\t\t}\n\t\tconst month: Record<string, number> = {\n\t\t\t\"January\": 0,\n\t\t\t\"February\": 1,\n\t\t\t\"March\": 2,\n\t\t\t\"April\": 3,\n\t\t\t\"May\": 4,\n\t\t\t\"June\": 5,\n\t\t\t\"July\": 6,\n\t\t\t\"August\": 7,\n\t\t\t\"September\": 8,\n\t\t\t\"October\": 9,\n\t\t\t\"November\": 10,\n\t\t\t\"December\": 11,\n\t\t\t'MayFeb': 4,\n\t\t\t'AugFeb': 7,\n\t\t\t'AugExp': 9\n\t\t}\n\n\t\tObject.keys(IncomeAgg['Income']).forEach((e) => {\n\t\t\tif ((e == 'February') || (e == 'MayFeb') || (e == 'AugFeb') || (e == 'AugExp')) {\n\t\t\t\tIncomeCI[month[e]] = [helper.getConfInt(IncomeAgg['Income'][e])[0], helper.getConfInt(IncomeAgg['Income'][e])[1]]\n\t\t\t}\n\t\t});\n\n\t\tconst IncomeMean: Record<number, number> = {};\n\t\tconst ExpMean: Record<number, number> = {};\n\n\t\tif (IncomeAgg['Income']['February'].length === 0) {\n\t\t\tIncomeMean[1] = 1\n\t\t} else {\n\t\t\tIncomeMean[1] = IncomeAgg['Income']['February'].reduce((a: number, b: number) => a + b, 0) / IncomeAgg['Income']['February'].length;\n\t\t\t[0, 1].forEach(i => IncomeCI[1][i] = 100 * IncomeCI[1][i] / IncomeMean[1])\n\t\t}\n\t\tObject.keys(IncomeAgg['Income']).forEach(e => {\n\t\t\tif ((e == 'MayFeb') || (e == 'AugFeb')) {\n\t\t\t\tif (IncomeAgg['Income'][e].length === 0) {\n\t\t\t\t\tIncomeMean[month[e]] = 0\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tIncomeMean[month[e]] = 100 * IncomeAgg['Income'][e].reduce((a: number, b: number) => (b + a), 0) / IncomeAgg['Income'][e].length;\n\t\t\t\t\t[0, 1].forEach(i => IncomeCI[month[e]][i] = 100 * IncomeCI[month[e]][i])\n\t\t\t\t}\n\t\t\t}\n\t\t\tif ((e == 'AugFeb') || (e == 'AugExp')) {\n\t\t\t\tif (IncomeAgg['Income'][e].length === 0) {\n\t\t\t\t\tExpMean[month[e]] = 0\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tExpMean[month[e]] = 100 * IncomeAgg['Income'][e].reduce((a: number, b: number) => (b + a), 0) / IncomeAgg['Income'][e].length;\n\t\t\t\t\tif (e == 'AugExp') {\n\t\t\t\t\t\t[0, 1].forEach(i => IncomeCI[month[e]][i] = 100 * IncomeCI[month[e]][i])\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\n\t\tconst passedIncomeCI = Object.entries(IncomeCI)\n\n\t\tIncomeMean[1] = 100;\n\n\t\t// console.log('incCII', IncomeCI)\n\t\t// console.log('IncMean', IncomeMean)\n\n\t\tconst SpendingCI: Record<number, number[]> = {}\n\t\tObject.keys(Spending).forEach((e) => {\n\t\t\tif ((e !== 'FebruaryR1') && (e !== 'FebruaryR2')) {\n\t\t\t\tSpendingCI[month[e]] = [helper.getConfInt(Spending[e])[0], helper.getConfInt(Spending[e])[1]]\n\t\t\t}\n\t\t});\n\n\t\tconst SpendingMean: Record<string, number> = {};\n\t\tconst SpendingExpMean: Record<number, number> = {};\n\n\t\tif (Spending['February'].length === 0) {\n\t\t\tSpendingMean[1] = 1\n\t\t} else {\n\t\t\tSpendingMean[1] = Spending['February'].reduce((a: number, b: number) => a + b, 0) / Spending['February'].length;\n\t\t\t[0, 1].forEach(i => SpendingCI[1][i] = 100 * SpendingCI[1][i] / SpendingMean[1])\n\t\t}\n\t\tObject.keys(Spending).forEach(e => {\n\t\t\tif ((e === 'May') || (e === 'August')) {\n\t\t\t\tif (Spending[e].length === 0) {\n\t\t\t\t\tSpendingMean[month[e]] = 0\n\t\t\t\t} else {\n\t\t\t\t\tif (e == 'May') {\n\t\t\t\t\t\tSpendingMean[month[e]] = 200 * Spending[e].reduce((a: number, b: number) => (b + a), 0) / Spending[e].length;\n\t\t\t\t\t\t[0, 1].forEach(i => SpendingCI[month[e]][i] = 200 * SpendingCI[month[e]][i])\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tSpendingMean[month[e]] = 100 * Spending[e].reduce((a: number, b: number) => (b + a), 0) / Spending[e].length;\n\t\t\t\t\t\t[0, 1].forEach(i => SpendingCI[month[e]][i] = 100 * SpendingCI[month[e]][i])\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif ((e == 'August') || (e == 'AugExp')) {\n\t\t\t\tif (Spending[e].length === 0) {\n\t\t\t\t\tSpendingExpMean[month[e]] = 0\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tSpendingExpMean[month[e]] = 100 * Spending[e].reduce((a: number, b: number) => (b + a), 0) / Spending[e].length;\n\t\t\t\t\tif (e == 'AugExp') {\n\t\t\t\t\t\t[0, 1].forEach(i => SpendingCI[month[e]][i] = 100 * SpendingCI[month[e]][i])\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\tconst passedSpendingCI = Object.entries(SpendingCI)\n\t\tSpendingMean[1] = 100;\n\n\t\t// g.selectAll('.LineArea').transition().duration(900).style('opacity', 0);\n\t\t// g.selectAll('.IncVsSpend').transition().duration(900).attr('opacity', 0);\n\t\t// g.selectAll('.PointIncVsSpend').transition().duration(800).attr('opacity', 0);\n\t\t// g.selectAll('.PointIncVsSpend').transition().delay(600).remove();\n\n\t\tconst tooltipTable: Record<string, Record<string, string>> = {}\n\t\tObject.keys(IncomeAgg['Income']).forEach(e => {\n\n\t\t\tlet percentile_25 = Math.round(0.25 * (IncomeAgg['Income'][e].length)) - 1;\n\t\t\tlet percentile_50 = Math.round(0.5 * (IncomeAgg['Income'][e].length)) - 1;\n\t\t\tlet percentile_75 = Math.round(0.75 * (IncomeAgg['Income'][e].length)) - 1;\n\n\t\t\tif (e == 'February') {\n\t\t\t\ttooltipTable[month[e]] = {\n\t\t\t\t\t'Value': IncomeMean[month[e]].toFixed(2) + '%',//\n\t\t\t\t\t'Mean': (IncomeAgg['Income'][e].reduce((a: number, b: number) => a + b, 0) / IncomeAgg['Income'][e].length).toFixed(2),\n\t\t\t\t\t'25 %': String((IncomeAgg['Income'][e]).sort((a: number, b: number) => a - b)[percentile_25]),\n\t\t\t\t\t'50 %': String((IncomeAgg['Income'][e]).sort((a: number, b: number) => a - b)[percentile_50]),\n\t\t\t\t\t'75 %': String((IncomeAgg['Income'][e]).sort((a: number, b: number) => a - b)[percentile_75]),\n\t\t\t\t\t'Count': String(IncomeAgg['Income'][e].length)\n\t\t\t\t};\n\t\t\t}\n\t\t\telse if ((e == 'MayFeb') || (e == 'AugFeb') || (e == 'AugExp')) {\n\t\t\t\tlet FebRMean: number = 0;\n\t\t\t\tif (e == 'MayFeb') {\n\n\t\t\t\t\tFebRMean = IncomeAgg['Income']['FebruaryR1'].reduce((a: number, b: number) => a + b, 0) /\n\t\t\t\t\t\tIncomeAgg['Income']['FebruaryR1'].length\n\t\t\t\t}\n\t\t\t\telse if ((e == 'AugFeb') || (e == 'AugExp')) {\n\n\t\t\t\t\tFebRMean = IncomeAgg['Income']['FebruaryR2'].reduce((a: number, b: number) => a + b, 0) /\n\t\t\t\t\t\tIncomeAgg['Income']['FebruaryR2'].length\n\t\t\t\t}\n\t\t\t\tif (e != 'AugExp') {\n\n\t\t\t\t\ttooltipTable[month[e]] = {\n\t\t\t\t\t\t'Value': IncomeMean[month[e]].toFixed(2) + '%',\n\t\t\t\t\t\t'Mean': ((IncomeMean[month[e]] / 100) * FebRMean).toFixed(2),\n\t\t\t\t\t\t'25 %': ((IncomeAgg['Income'][e]).sort((a: number, b: number) => a - b)[percentile_25] * 100).toFixed(2) + '%',\n\t\t\t\t\t\t'50 %': ((IncomeAgg['Income'][e]).sort((a: number, b: number) => a - b)[percentile_50] * 100).toFixed(2) + '%',\n\t\t\t\t\t\t'75 %': ((IncomeAgg['Income'][e]).sort((a: number, b: number) => a - b)[percentile_75] * 100).toFixed(2) + '%',\n\t\t\t\t\t\t'Count': String(IncomeAgg['Income'][e].length)\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\ttooltipTable[month[e]] = {\n\t\t\t\t\t\t'Value': ExpMean[month[e]].toFixed(2) + '%',\n\t\t\t\t\t\t'Mean': ((ExpMean[month[e]] / 100) * FebRMean).toFixed(2),\n\t\t\t\t\t\t'25 %': ((IncomeAgg['Income'][e]).sort((a: number, b: number) => a - b)[percentile_25] * 100).toFixed(2) + '%',\n\t\t\t\t\t\t'50 %': ((IncomeAgg['Income'][e]).sort((a: number, b: number) => a - b)[percentile_50] * 100).toFixed(2) + '%',\n\t\t\t\t\t\t'75 %': ((IncomeAgg['Income'][e]).sort((a: number, b: number) => a - b)[percentile_75] * 100).toFixed(2) + '%',\n\t\t\t\t\t\t'Count': String(IncomeAgg['Income'][e].length)\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\n\t\t// console.log('tooltipp', tooltipTable)\n\t\tconst tooltipSpendTable: Record<string, Record<string, string>> = {}\n\t\tObject.keys(Spending).forEach(e => {\n\n\t\t\tlet percentile_25 = Math.round(0.25 * (Spending[e].length)) - 1;\n\t\t\tlet percentile_50 = Math.round(0.5 * (Spending[e].length)) - 1;\n\t\t\tlet percentile_75 = Math.round(0.75 * (Spending[e].length)) - 1;\n\t\t\tif ((e !== 'FebruaryR1') && (e !== 'FebruaryR2')) {\n\t\t\t\tif (e == 'February') {\n\n\t\t\t\t\ttooltipSpendTable[month[e]] = {\n\t\t\t\t\t\t'Value': SpendingMean[month[e]].toFixed(2) + '%',\n\t\t\t\t\t\t'Mean': (Spending[e].reduce((a: number, b: number) => a + b, 0) / Spending[e].length).toFixed(2),\n\t\t\t\t\t\t'25 %': String((Spending[e]).sort((a: number, b: number) => a - b)[percentile_25]),\n\t\t\t\t\t\t'50 %': String((Spending[e]).sort((a: number, b: number) => a - b)[percentile_50]),\n\t\t\t\t\t\t'75 %': String((Spending[e]).sort((a: number, b: number) => a - b)[percentile_75]),\n\t\t\t\t\t\t'Count': String(Spending[e].length)\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tlet FebRMean: number = 0;\n\t\t\t\t\tif (e == 'May') {\n\n\t\t\t\t\t\tFebRMean = Spending['FebruaryR1'].reduce((a: number, b: number) => a + b, 0) /\n\t\t\t\t\t\t\tSpending['FebruaryR1'].length\n\t\t\t\t\t}\n\t\t\t\t\telse if ((e == 'August') || (e == 'AugExp')) {\n\n\t\t\t\t\t\tFebRMean = Spending['FebruaryR2'].reduce((a: number, b: number) => a + b, 0) /\n\t\t\t\t\t\t\tSpending['FebruaryR2'].length\n\t\t\t\t\t}\n\t\t\t\t\tif (e != 'AugExp') {\n\t\t\t\t\t\ttooltipSpendTable[month[e]] = {\n\t\t\t\t\t\t\t'Value': SpendingMean[month[e]].toFixed(2) + '%',\n\t\t\t\t\t\t\t'Mean': ((SpendingMean[month[e]] / 100) * FebRMean).toFixed(2),\n\t\t\t\t\t\t\t'25 %': ((Spending[e]).sort((a: number, b: number) => a - b)[percentile_25] * 100).toFixed(2) + '%',\n\t\t\t\t\t\t\t'50 %': ((Spending[e]).sort((a: number, b: number) => a - b)[percentile_50] * 100).toFixed(2) + '%',\n\t\t\t\t\t\t\t'75 %': ((Spending[e]).sort((a: number, b: number) => a - b)[percentile_75] * 100).toFixed(2) + '%',\n\t\t\t\t\t\t\t'Count': String(Spending[e].length)\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\ttooltipSpendTable[month[e]] = {\n\t\t\t\t\t\t\t'Value': SpendingExpMean[month[e]].toFixed(2) + '%',\n\t\t\t\t\t\t\t'Mean': ((SpendingExpMean[month[e]] / 100) * FebRMean).toFixed(2),\n\t\t\t\t\t\t\t'25 %': ((Spending[e]).sort((a: number, b: number) => a - b)[percentile_25] * 100).toFixed(2) + '%',\n\t\t\t\t\t\t\t'50 %': ((Spending[e]).sort((a: number, b: number) => a - b)[percentile_50] * 100).toFixed(2) + '%',\n\t\t\t\t\t\t\t'75 %': ((Spending[e]).sort((a: number, b: number) => a - b)[percentile_75] * 100).toFixed(2) + '%',\n\t\t\t\t\t\t\t'Count': String(Spending[e].length)\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\n\t\tlet yLabel = ''\n\t\tlet plotTitle = ''\n\t\tlet xAxis;\n\t\tlet xLabel;\n\t\tconst tick: any = \"\"\n\n\t\tconst g = d3.select('#IncomeSVG')\n\n\t\tlet passedData: [string, number][];\n\t\tlet ExpPassedData: [string, number][];\n\t\tlet linearScale: any;\n\t\tlet bandScale: any;\n\t\tlet legend: Record<string, string> = {}\n\t\tlet legendDot: Record<string, string> = {}\n\n\t\thelper.generateElements([['line', 1]], 'LineArea', g, 'path')\n\t\thelper.generateElements([['line', 1]], 'LineExpected', g, 'path')\n\t\tif ((index === 0) || (index === 1)) {\n\n\t\t\tyLabel = 'Percentage (%)'\n\t\t\tplotTitle = 'Line Chart 1'\n\n\t\t\tpassedData = Object.entries(IncomeMean);\n\t\t\tExpPassedData = Object.entries(ExpMean);\n\t\t\t[linearScale, bandScale] = helper.generateAxis(Object.keys(eName),\n\t\t\t\t[0, Math.max(170, 1.3 * Number(max(Object.values(IncomeMean))))], [0, innerWidth], [innerHeight, 0])\n\t\t\tbandScale.padding(1)\n\n\t\t\tbandScale =\n\t\t\t\td3.scaleTime()\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t.domain([new Date(2020, 0, 1), new Date(2020, 10, 31)])\n\t\t\t\t\t.range([0, innerWidth])\n\n\t\t\tmakeLineMonth()\n\n\t\t\tlegend = {\n\t\t\t\t'Line 1': '#344a62',\n\t\t\t}\n\t\t\tlegendDot = {\n\t\t\t\t'Expected': '#344a62'\n\t\t\t}\n\t\t\tif (index == 1) {\n\t\t\t\tplotTitle = 'Line Chart 2'\n\t\t\t\tlegend = {\n\t\t\t\t\t'Line 2': '#344a62',\n\t\t\t\t}\n\t\t\t}\n\n\t\t\thelper.showLegend(legend, g)\n\t\t\thelper.showLegendDot(legendDot, g, true)\n\n\n\t\t\tlet line: any = d3.line()\n\t\t\t\t.x((d) => {\n\t\t\t\t\treturn (bandScale(new Date(2020, d[0], 1)))\n\t\t\t\t})\n\t\t\t\t.y((d) => linearScale(d[1]))\n\n\t\t\tg.selectAll('.LineExpected')\n\t\t\t\t.datum(ExpPassedData)\n\t\t\t\t.attr(\"fill\", \"none\")\n\t\t\t\t.style(\"stroke-dasharray\", (\"3, 3\"))\n\t\t\t\t.transition().delay(500)\n\t\t\t\t.transition().duration(500)\n\t\t\t\t.attr(\"d\", line)\n\n\t\t\thelper.highlight(passedData, g, bandScale, linearScale, 'Point', tooltipTable, true)\n\t\t\thelper.highlight(ExpPassedData, g, bandScale, linearScale, 'PointExp', tooltipTable, true)\n\n\t\t\tlet area: any = d3.area().x((d) => bandScale(new Date(2020, d[0], 1)))\n\t\t\t\t//@ts-ignore\n\t\t\t\t.y0((d) => linearScale(d[1][0]))\n\t\t\t\t//@ts-ignore\n\t\t\t\t.y1((d) => linearScale(d[1][1]))\n\n\t\t\tg.selectAll('.LineArea')\n\t\t\t\t.datum(passedIncomeCI)\n\t\t\t\t.transition().delay(500)\n\t\t\t\t.transition().duration(500)\n\t\t\t\t.attr(\"d\", area);\n\n\t\t\t//@ts-ignore\n\t\t\txAxis = d3.axisBottom(bandScale)\n\t\t\t\t.tickValues([new Date(2020, 0, 1), new Date(2020, 1, 1), new Date(2020, 4, 1), new Date(2020, 7, 1),\n\t\t\t\tnew Date(2020, 9, 1), new Date(2020, 11, 1)])\n\t\t\t\t//@ts-ignore\n\t\t\t\t.tickFormat(d3.timeFormat(\"%b\"));\n\t\t\txLabel = 'Months'\n\n\t\t\thelper.showXAxis(xAxis, g, innerHeight, innerWidth, xLabel)\n\t\t\thelper.showXGrid(xAxis.tickSize(-innerHeight).tickFormat(tick), g)\n\n\t\t}\n\n\t\telse if ((index === 2)) {\n\t\t\t// helper.generateElements([], 'LineExpected', g, 'path')\n\n\t\t\tyLabel = 'Percentage (%)'\n\t\t\tplotTitle = 'Line Chart 3'\n\t\t\tpassedData = Object.entries(SpendingMean);\n\t\t\tExpPassedData = Object.entries(SpendingExpMean);\n\t\t\t[linearScale, bandScale] = helper.generateAxis(Object.keys(eName),\n\t\t\t\t[0, Math.max(170, 1.1 * Number(max(Object.values(SpendingMean))))], [0, innerWidth], [innerHeight, 0])\n\t\t\tbandScale.padding(1)\n\n\t\t\tbandScale =\n\t\t\t\td3.scaleTime()\n\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t.domain([new Date(2020, 0, 1), new Date(2020, 10, 31)])\n\t\t\t\t\t.range([0, innerWidth])\n\n\t\t\tmakeLineMonth()\n\t\t\t// makeLine()\n\n\t\t\tlegend = {\n\t\t\t\t'Line 3': '#344a62'\n\t\t\t}\n\t\t\tlegendDot = {\n\t\t\t\t'Expected': '#344a62'\n\t\t\t}\n\t\t\thelper.showLegend(legend, g)\n\t\t\thelper.showLegendDot(legendDot, g, true)\n\n\t\t\t// helper.generateElements([['line', 1]], 'LineExpected', g, 'path')\n\n\t\t\tlet line: any = d3.line()\n\t\t\t\t.x((d) => {\n\t\t\t\t\treturn (bandScale(new Date(2020, d[0], 1)))\n\t\t\t\t})\n\t\t\t\t.y((d) => linearScale(d[1]))\n\n\t\t\tg.selectAll('.LineExpected')\n\t\t\t\t.datum(ExpPassedData)\n\t\t\t\t.attr(\"fill\", \"none\")\n\t\t\t\t.style(\"stroke-dasharray\", (\"3, 3\"))\n\t\t\t\t.transition().delay(500)\n\t\t\t\t.transition().duration(500)\n\t\t\t\t.attr(\"d\", line)\n\n\t\t\thelper.highlight(passedData, g, bandScale, linearScale, 'Point', tooltipSpendTable, true)\n\t\t\thelper.highlight(ExpPassedData, g, bandScale, linearScale, 'PointExp', tooltipSpendTable, true)\n\n\t\t\t// helper.highlight(passedData, g, bandScale, linearScale, 'Point', tooltipSpendTable)\n\n\t\t\tlet area: any = d3.area().x((d) => bandScale(new Date(2020, d[0], 1)))\n\t\t\t\t//@ts-ignore\n\t\t\t\t.y0((d) => linearScale(d[1][0]))\n\t\t\t\t//@ts-ignore\n\t\t\t\t.y1((d) => linearScale(d[1][1]))\n\n\t\t\tg.selectAll('.LineArea')\n\t\t\t\t.datum(passedSpendingCI)\n\t\t\t\t.transition().delay(500)\n\t\t\t\t.transition().duration(500)\n\t\t\t\t.attr(\"d\", area)\n\n\n\t\t\txAxis = d3.axisBottom(bandScale)\n\t\t\t\t.tickValues([new Date(2020, 0, 1), new Date(2020, 1, 1), new Date(2020, 4, 1), new Date(2020, 7, 1),\n\t\t\t\tnew Date(2020, 9, 1), new Date(2020, 11, 1)])\n\t\t\t\t//@ts-ignore\n\t\t\t\t.tickFormat(d3.timeFormat(\"%b\"));\n\n\t\t\txLabel = 'Months'\n\n\t\t\thelper.showXAxis(xAxis, g, innerHeight, innerWidth, xLabel)\n\t\t\thelper.showXGrid(xAxis.tickSize(-innerHeight).tickFormat(tick), g)\n\n\t\t}\n\n\t\tconst yAxis = d3.axisLeft(linearScale)\n\t\thelper.showYAxis(yAxis, g, innerHeight, innerWidth, yLabel, margin)\n\t\thelper.plotTitle(g, innerWidth, plotTitle)\n\n\t\thelper.showYGrid(yAxis.tickSize(-innerWidth).tickFormat(tick), g)\n\n\t\tfunction makeLineMonth() {\n\n\t\t\thelper.generateElements([['line', 1]], 'LineGraph', g, 'path')\n\n\t\t\tlet line: any = d3.line()\n\t\t\t\t.x((d) => bandScale(new Date(2020, d[0], 1)))\n\t\t\t\t.y((d) => linearScale(d[1]))\n\n\t\t\tg.selectAll('.LineGraph')\n\t\t\t\t.datum(passedData)\n\t\t\t\t.attr(\"fill\", \"none\")\n\t\t\t\t.transition().delay(500)\n\t\t\t\t.transition().duration(500)\n\t\t\t\t.attr(\"d\", line)\n\t\t}\n\n\t\tg.selectAll('.legend')\n\t\t\t.attr('transform', `translate(${bandScale.range()[1] - 140},${margin.top})`)\n\n\t\t// g.transition().duration(900)\n\t\tg.attr('transform', `translate(${margin.left},${margin.top})`)\n\t}\n\n\tlet activeIndex = 0;\n\tlet lastIndex = -1;\n\n\tconst scrollVis = (index: number) => {\n\t\tconst g = d3.select('#IncomeSVG')\n\n\t\thelper.createGrid(g, innerHeight)\n\t\thelper.createAxis(g, innerHeight)\n\t\thelper.generateElements([['legend', 1]], 'legend', g, 'g')\n\n\t\tactiveIndex = index;\n\n\t\tconst sign = (activeIndex - lastIndex) < 0 ? -1 : 1;\n\t\tconst scrolledSections = [activeIndex]\n\n\t\tscrolledSections.forEach(function (i) {\n\t\t\tIncome(i);\n\t\t});\n\t\tlastIndex = activeIndex;\n\t};\n\n\tconst pan = d3.select('.' + section)\n\n\tuseEffect(() => {\n\t\tif (cardInd === 1) {\n\t\t\tset_filterComb('F1')\n\t\t}\n\t\telse {\n\t\t\tset_filterComb('None')\n\t\t}\n\t\tset_filterRDD(\"None\")\n\t}, [cardInd, isVisible]);\n\n\tuseEffect(() => {\n\t\tset_filter('Overall')\n\t\tset_filterIncome('F0')\n\t\tset_filterEducation('None')\n\t\tif (filter_Comb != 'None') {\n\n\t\t\tif ((filter_Comb == 'Rural') || (filter_Comb == 'Urban')) {\n\t\t\t\tset_filter(filter_Comb)\n\t\t\t}\n\t\t\telse if ((filter_Comb == 'F1') || (filter_Comb == 'F2')) {\n\t\t\t\tset_filterIncome(filter_Comb)\n\t\t\t}\n\t\t\telse {\n\t\t\t\tset_filterEducation(filter_Comb)\n\t\t\t}\n\t\t}\n\t}, [filter_Comb]);\n\n\tuseEffect(() => {\n\n\t\t(window.matchMedia(\"(max-width: 767px)\").matches) ?\n\t\t\tset_openFilter('0vh') : set_openFilter('auto');\n\t\tif (isVisible) {\n\t\t\tpan.selectAll('.card')\n\t\t\t\t.style('opacity', function (d, i) { return i === cardInd ? 1 : 0.3; });\n\n\t\t\td3.select('#IncomeSVG')\n\t\t\t\t.style('opacity', 1);\n\t\t\tscrollVis(cardInd);\n\t\t} else {\n\t\t\tpan.selectAll('.card')\n\t\t\t\t.style('opacity', 0.4);\n\n\t\t\td3.select('#IncomeSVG')\n\t\t\t\t.style('opacity', 0.4);\n\t\t}\n\t\tset_graphic(999)\n\t}, [isVisible, cardInd, data, width, height, filter_val, filter_Income, filter_Education, filter_RDD]);\n\n\treturn <div id='Income' className=\"section\" style={{ width: `${width}`, height: `${((height + 120) * 4) + 300}px` }}>\n\t\t<div id='graphic' className={section} style={{ zIndex: graphicFilter }}>\n\t\t\t<div id=\"0\" className=\"card\" >\n\t\t\t\t<div className=\"content\">\n\t\t\t\t\tLorem ipsum dolor sit amet, consectetur adipiscing elit.\n\t\t\t\t\tDuis facilisis suscipit dui accumsan mattis.\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div id=\"1\" className=\"card\" >\n\t\t\t\t<div className=\"content\">\n\t\t\t\t\tLorem ipsum dolor sit amet, consectetur adipiscing elit.\n\t\t\t\t\tDuis facilisis suscipit dui accumsan mattis.\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div id=\"2\" className=\"card\" >\n\t\t\t\t<div className=\"content\">\n\t\t\t\t\tLorem ipsum dolor sit amet, consectetur adipiscing elit.\n\t\t\t\t\tDuis facilisis suscipit dui accumsan mattis.\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div id='vis' style={{ height: height + 120 }} >\n\t\t\t<svg width={width} height={height + 20} >\n\t\t\t\t<g id='IncomeSVG' />\n\t\t\t</svg>\n\t\t\t<div id=\"filter\" style={{ gridTemplateColumns: 'repeat(1, 1fr)', height: openFilter, width: width }}>\n\t\t\t\t<span className=\"close\" onClick={() => { set_openFilter('0vh'); set_graphic(999) }}>&times;</span>\n\t\t\t\t<AreaIncEduFilter set_filterAreaIncEdu={set_filterComb} value={filter_Comb} />\n\t\t\t</div>\n\t\t\t<button className='Filter_Button' onClick={() => {\n\t\t\t\tif (openFilter == '0vh') {\n\t\t\t\t\tset_openFilter('20vh'); set_graphic(-1)\n\t\t\t\t} else {\n\t\t\t\t\tset_openFilter('0vh'); set_graphic(999)\n\t\t\t\t}\n\t\t\t}}>Filters</button>\n\t\t</div>\n\t</div >\n}\n\nexport default TestIncome;","import * as d3 from 'd3'\nimport { off } from 'process';\n\nfunction scroller(container: d3.Selection<d3.BaseType, unknown, HTMLElement, any>,\n\tels: d3.Selection<d3.BaseType, unknown, d3.BaseType, unknown>, y: number) {\n\n\tlet sections: d3.Selection<d3.BaseType, unknown, d3.BaseType, unknown>;\n\tlet sectionPositions: number[] = [];\n\tlet containerStart = 0;\n\n\tsections = els;\n\n\tlet startPos: number;\n\tsections.each(function (d, i: number) {\n\t\t//@ts-ignore\n\t\tlet top = this.getBoundingClientRect().top;\n\t\t//@ts-ignore\n\t\t// console.log('TOP', this.getBoundingClientRect(), top)\n\t\t//@ts-ignore\n\t\t// console.log('scroller', this.getBoundingClientRect())\n\t\tif (i === 0) {\n\t\t\tstartPos = top;\n\t\t}\n\t\tsectionPositions.push(top - startPos);\n\t});\n\n\t//@ts-ignore\n\tcontainerStart = container.node().getBoundingClientRect().top + y;\n\n\tlet offset = 200;\n\n\tif (window.matchMedia(\"(max-width: 767px)\").matches) {\n\t\toffset = 0\n\t}\n\n\t// let pos1 = y + offset - containerStart;\n\t//@ts-ignore\n\tlet pos = offset - container.node().getBoundingClientRect().top;\n\tlet sectionIndex;\n\tif (sectionPositions.length === 0) {\n\t\tsectionIndex = 0;\n\t}\n\telse {\n\t\tsectionIndex = 0\n\n\t\tif (pos >= sectionPositions[sectionPositions.length - 1]) {\n\t\t\tsectionIndex = sectionPositions.length - 1\n\t\t} else {\n\t\t\tfor (var i = 0; i < sectionPositions.length - 1; i++) {\n\t\t\t\tif (pos >= sectionPositions[i] && pos < sectionPositions[i + 1]) {\n\t\t\t\t\tsectionIndex = i\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// console.log('node', container.node())\n\t// console.log('secpos', sectionPositions)\n\t// console.log('pos', pos)\n\t// console.log('sec index', sectionIndex)\n\t// console.log('Con start', containerStart)\n\t//@ts-ignore\n\t// console.log('cont top', container.node().getBoundingClientRect().top )\n\n\n\treturn sectionIndex\n\n\t// let prevIndex = Math.max(sectionIndex - 1, 0);\n\t// let prevTop = sectionPositions[prevIndex];\n\t// let progress = (pos - prevTop) / (sectionPositions[sectionIndex] - prevTop);\n}\n\nexport default scroller;\n","import React from 'react'\n\ninterface P {\n\tset_filterAreaEdu: Function\n\tvalue: string\n}\n\nconst AreaEduFilter: React.FC<P> = ({ set_filterAreaEdu, value }) => {\n\n\treturn <label className='FiltLab'>Filters\n\t<select id='CombFilterDropdown' className='Filter' onChange={e => set_filterAreaEdu(e.target.value)} value={value} >\n\t\t\t<option value=\"None\">None</option>\n\t\t\t<option value='Rural'>Rural</option>\n\t\t\t<option value='Urban'>Urban</option>\n\t\t\t<option value='Dropped out Before Matric'>Dropped out before Matric</option>\n\t\t\t<option value='Matric'>Matric</option>\n\t\t\t<option value='More than Matric'>More than Matric</option>\n\t\t</select>\n\t</label>\n\n}\nexport default AreaEduFilter\n","import React, { useEffect, useState } from 'react'\nimport * as d3 from 'd3'\nimport { max } from 'd3'\nimport * as helper from './helperFunctions'\n\ninterface P {\n    filter_Education: string\n    filter_RDD: string\n    filter_Round: number\n    filter_val: string\n    width: number\n    height: number\n    cardInd: number\n    data: RootReducerState['raw_data']\n}\n\nconst ordering: Record<string, number> = {\n    \"Extremely effective\": 1,\n    \"Mostly effective\": 2,\n    \"Moderately effective\": 3,\n    'Mostly ineffective': 4,\n    \"Not effective at all\": 5,\n}\n\nconst EduBucket: Record<string, number[]> = {\n    'Dropped out Before Matric': [1, 2],\n    'Matric': [3],\n    'More than Matric': [4, 5, 6, 7, 8, 9]\n}\n\nfunction TestShowLockEffect({ filter_Education, filter_RDD, filter_Round, filter_val, width, height, cardInd, data }: P) {\n\n    const margin = { top: 40, right: 20, bottom: 20, left: 45 }\n    const filter_Income = 'F0'\n    const innerWidth = width - margin.left - margin.right\n    const innerHeight = height - margin.top - margin.bottom\n\n    function showLock() {\n\n        let LowerLimit: number = 0;\n        let UpperLimit: number = Number.MAX_VALUE;\n\n        let q_key = \"lt_11\"\n        let n = 0;\n        const LockEffect = Object.values(data)\n            .reduce((agg: Record<string, number>, curr: any) => {\n                (curr.Round == 1) ? q_key = \"lt_11\" : q_key = \"s7_2\";\n                if (curr[q_key] !== undefined && curr['Round'] == filter_Round && (filter_RDD !== \"None\" ? curr.prefix == filter_RDD : true)) {\n                    if ((filter_val !== \"Overall\" ? curr.lt_1 === filter_val : true)\n                        && (filter_Education !== \"None\" ? EduBucket[filter_Education].includes(curr.i_0) : true)) {\n\n                        if (curr['i_6'] !== undefined && curr['i_6'] > LowerLimit\n                            && curr['i_6'] <= UpperLimit) {\n\n                            agg[curr[q_key]] = (agg[curr[q_key]] || 0) + 1\n\n                            n += 1\n                        }\n                    }\n                }\n                return agg\n            }, {})\n\n        const tooltipLockEffect: Record<string, Record<string, string>> = {}\n        Object.keys(LockEffect).forEach(e => {\n            tooltipLockEffect[e] = {\n                'Value': (100 * LockEffect[e] / n).toFixed(2) + '%',\n                'Count': String(LockEffect[e]),\n            };\n        })\n\n        Object.keys(LockEffect).forEach((e) => LockEffect[e] = LockEffect[e] / n * 100)\n\n        const order_by_ordering = ([k1,]: [string, any], [k2,]: [string, any]) => ordering[k2] - ordering[k1]\n        const passedData = Object.entries(LockEffect).sort(order_by_ordering)\n        const [linearScale, bandScale] = helper.generateAxis(Object.keys(ordering), [0, Math.max(50, Number(max(Object.values(LockEffect))))], [0, innerWidth], [innerHeight, 0])\n        const xLockEffectAxis = d3.axisBottom<any>(bandScale)\n        const yLockEffectAxis = d3.axisLeft<any>(linearScale)\n\n        const g = d3.select('#MissedPaymentsSVG')\n\n        helper.generateElements([], 'BarFoodGroupU', g)\n        helper.generateElements([], 'BarFoodGroup', g)\n        g.selectAll('.legendCircle')\n            .data([])\n            .join(\n                enter => enter,\n                update => update,\n                exit => exit\n                    .transition().duration(650)\n                    .attr('r', 0)\n                    .remove(),\n            )\n        helper.generateElements([], 'legend', g)\n\n        const t = g.transition().duration(650);\n\n        bandScale.padding(0.2)\n\n        helper.generateVertBars(passedData, 'BarGraph', g, linearScale)\n\n        g.selectAll('.BarGraph')\n            .call(s => s.transition(t)\n                .attr('width', bandScale.bandwidth())\n                .attr('x', (d: any) => bandScale(d[0]))\n                .attr('y', (d: any) => linearScale(d[1]))\n                .attr('height', (d: any) => Math.max(0, linearScale(linearScale.domain()[1] - d[1])))\n\t\t\t\t.delay((d, i) => (i * 60)))\n\n        helper.highlightVertBar({\n            selection: g, bandScale: bandScale, linearScale: linearScale,\n            className: 'BarGraph', margin: margin,\n            tooltipTable: tooltipLockEffect\n        })\n\n\n\n        let plotTitle = \"Vertical Bar Chart\"\n\n        const yLabel = 'Percentage (%)'\n\n        helper.plotTitle(g, innerWidth, plotTitle)\n        helper.showXAxis(xLockEffectAxis, g)\n        helper.showYAxis(yLockEffectAxis, g, innerHeight, innerWidth, yLabel, margin)\n\n        g.transition().duration(650)\n            .attr('transform', `translate(${margin.left},${margin.top})`)\n    };\n\n    let activeIndex = 0;\n    let lastIndex = -1;\n\n    const scrollVis = (index: number) => {\n\n        const g = d3.select('#MissedPaymentsSVG')\n\n        // helper.createAxis(g, innerHeight)\n        activeIndex = index;\n        const sign = (activeIndex - lastIndex) < 0 ? -1 : 1;\n        const scrolledSections = [activeIndex]\n\n        scrolledSections.forEach(function (i) {\n            showLock();\n        });\n        lastIndex = activeIndex;\n\n        // (window.matchMedia(\"(max-width: 767px)\").matches) ?\n        // \tset_openFilter('0vh') : set_openFilter('auto');\n    };\n    scrollVis(cardInd);\n\n    // const pan = d3.select('.' + section)\n\n    // useEffect(() => {\n    // \tset_filter('Overall')\n    // \tset_filterIncome('F0')\n    // \tset_filterEducation('None')\n    // \tif (filter_Comb != 'None') {\n\n    // \t\tif ((filter_Comb == 'Rural') || (filter_Comb == 'Urban')) {\n    // \t\t\tset_filter(filter_Comb)\n    // \t\t}\n    // \t\telse if ((filter_Comb == 'F1') || (filter_Comb == 'F2')) {\n    // \t\t\tset_filterIncome(filter_Comb)\n    // \t\t}\n    // \t\telse {\n    // \t\t\tset_filterEducation(filter_Comb)\n    // \t\t}\n    // \t}\n    // }, [filter_Comb]);\n\n    // useEffect(() => {\n\n    // \tif (isVisible) {\n    // \t\tpan.selectAll('.card')\n    // \t\t\t.style('opacity', function (d, i) { return i === cardInd ? 1 : 0.3; });\n\n    // \t\td3.select('#MissedPaymentsSVG')\n    // \t\t\t.style('opacity', 1);\n    // \t\tscrollVis(cardInd);\n    // \t} else {\n    // \t\tpan.selectAll('.card')\n    // \t\t\t.style('opacity', 0.4);\n\n    // \t\td3.select('#MissedPaymentsSVG')\n    // \t\t\t.style('opacity', 0.4);\n    // \t}\n    // \tset_graphic(999)\n    // }, [isVisible, cardInd, data, width, height, filter_val, filter_Round, filter_Income, filter_Education, filter_RDD]);\n    // (height/0.72) * 2}px`\n    // return <div id='LockEffect' className=\"section\" style={{ width: `${width}`, height: `${((height + 120) * 2) + 100}px` }}>\n    // \t<div id='graphic' className={section} style={{ zIndex: graphicFilter }}>\n    // \t\t<div className=\"card\" >\n    // \t\t\t<div className=\"content\">\n    // \t\t\t\tLOCKDOWN EFFECTIVENESS<br /><br />Lorem ipsum dolor sit amet, consectetur adipiscing elit.\n    // \t\t\t\tDuis facilisis suscipit dui accumsan mattis.\n    // \t\t\t</div>\n    // \t\t</div>\n    // \t</div>\n    // \t<div id='vis' style={{ height: height + 120 }}>\n    // \t\t<svg width={width} height={height + 20} >\n    // \t\t\t<g id=\"MissedPaymentsSVG\" />\n    // \t\t</svg>\n    // \t\t<div id=\"filter\" style={{ gridTemplateColumns: 'repeat(2, 1fr)', height: openFilter, width: width }}>\n    // \t\t\t<span className=\"close\" onClick={() => { set_openFilter('0vh'); set_graphic(999) }}>&times;</span>\n    // \t\t\t<AreaIncEduFilter set_filterAreaIncEdu={set_filterComb} value={filter_Comb} />\n    // \t\t\t<filter.RoundFilter set_filter={set_filterRound} value={filter_Round} />\n    // \t\t\t{/* <filter.RDDFilter set_filter={set_filterRDD} value={filter_RDD} /> */}\n    // \t\t</div>\n    // \t\t<button className='Filter_Button' onClick={() => {\n    // \t\t\tif (openFilter == '0vh') {\n    // \t\t\t\tset_openFilter('30vh'); set_graphic(-1)\n    // \t\t\t} else {\n    // \t\t\t\tset_openFilter('0vh'); set_graphic(999)\n    // \t\t\t}\n    // \t\t}}>Filters</button>\n    // \t</div>\n    // </div>\n}\n\nexport default TestShowLockEffect;","import React, { useEffect, useState } from 'react'\nimport * as d3 from 'd3'\nimport * as helper from '../helperFunctions'\n\ninterface P {\n    filter_Education: string\n    filter_RDD: string\n    width: number\n    height: number\n    cardInd: number\n    data: RootReducerState['raw_data']\n}\n\nconst EduBucket: Record<string, number[]> = {\n    'Dropped out Before Matric': [1, 2],\n    'Matric': [3],\n    'More than Matric': [4, 5, 6, 7, 8, 9]\n}\n\nfunction FoodClusFunc({ filter_Education, filter_RDD, width, height, cardInd, data }: P) {\n\n    const margin = { top: 40, right: 20, bottom: 20, left: 55 }\n    // const [openFilter, set_openFilter] = useState('0vh')\n\n    const innerWidth = width - margin.left - margin.right\n    const innerHeight = height - margin.top - margin.bottom\n    const assign: Record<string, Record<string, number>> = {\n        'Urban': {\n            'Round U1': 0,\n            'Round U2': 0\n        },\n        'Rural': {\n            'Round 1': 0,\n            'Round 2': 0\n        }\n    }\n    function FoodClus() {\n\n        let Ur1 = 0;\n        let Ur2 = 0;\n        let Rr1 = 0;\n        let Rr2 = 0;\n        const Food = Object.values(data)\n            .reduce((agg: Record<string, Record<string, number>>, curr: any) => {\n                if (curr.fi_1 !== undefined && (filter_RDD !== \"None\" ? curr.prefix == filter_RDD : true)) {\n                    if ((filter_Education !== \"None\" ? EduBucket[filter_Education].includes(curr.i_0) : true)) {\n\n                        if (curr.Round == 1) {\n                            if (curr.lt_1 == 'Urban') {\n                                Ur1 += 1\n                            }\n                            else if (curr.lt_1 == 'Rural') {\n                                Rr1 += 1\n                            }\n                        }\n                        else {\n                            if (curr.lt_1 == 'Urban') {\n                                Ur2 += 1\n                            }\n                            else if (curr.lt_1 == 'Rural') {\n                                Rr2 += 1\n                            }\n                        }\n                        if (curr.fi_1 == 0) {\n\n                            if (curr.Round == 1) {\n                                if (curr.lt_1 == 'Urban') {\n                                    agg['Urban']['Round U1'] += 1\n                                }\n                                else if (curr.lt_1 == 'Rural') {\n                                    agg['Rural']['Round 1'] += 1\n                                }\n                            }\n                            else if (curr.Round == 2) {\n                                if (curr.lt_1 == 'Urban') {\n                                    agg['Urban']['Round U2'] += 1\n                                }\n                                else if (curr.lt_1 == 'Rural') {\n                                    agg['Rural']['Round 2'] += 1\n                                }\n                            }\n                        }\n                    }\n                }\n                return agg\n            }, assign)\n\n        // console.log('Food', Food, 'Rural R1:', Rr1,'Urban R1:', Ur1,'Rural R2:', Rr2,'Urban R2:', Ur2)\n\n        let n = 0\n        const tooltipFood: Record<string, Record<string, string>> = {}\n        Object.keys(Food).forEach(e => {\n            Object.keys(Food[e]).forEach(r => {\n\n                if (e == 'Urban') {\n                    ((r == 'Round U1')) ? n = Ur1 : n = Ur2;\n                }\n                if (e == 'Rural') {\n                    ((r == 'Round 1')) ? n = Rr1 : n = Rr2;\n                }\n                tooltipFood[r] = {\n                    'Value': (100 * Food[e][r] / n).toFixed(2) + '%',\n                    'Count': String(Food[e][r]),\n                };\n                Food[e][r] = 100 * Food[e][r] / n\n            });\n        })\n        // const order_by_ordering = ([k1,]: [string, any], [k2,]: [string, any]) => ordering[k2] - ordering[k1]\n        const passedData: [string, Record<string, number>][] = Object.entries(Food)\n\n        const [linearScale, bandScale] = helper.generateAxis(Object.keys(Food),\n            [0, 40], [0, innerWidth], [innerHeight, 0])\n\n        const xSubgroup = d3.scaleBand()\n            .domain(['Round 1', 'Round 2'])\n            .range([bandScale.bandwidth() * 0.05, bandScale.bandwidth() * 0.95])\n            .padding(0.1);\n\n        const xSubgroup2 = d3.scaleBand()\n            .domain(['Round U1', 'Round U2'])\n            .range([bandScale.bandwidth() * 0.05, bandScale.bandwidth() * 0.95])\n            .padding(0.1);\n\n        const xFoodAxis = d3.axisBottom<any>(bandScale)\n        const yFoodAxis = d3.axisLeft<any>(linearScale)\n\n        const g = d3.select('#MissedPaymentsSVG')\n        const t = g.transition().duration(650);\n        let legend: Record<string, string> = {}\n\n        bandScale.padding(0)\n\n        helper.generateElements([], 'BarGraph', g)\n\n        if (!isNaN(Object.values(passedData[0][1])[0])) {\n\n            g.selectAll('.gBarFood')\n                .data(passedData)\n                .join(\n                    enter => enter.append('g')\n                        .attr(\"transform\", (d: any) => {\n                            return \"translate(\" + bandScale(d[0]) + \",0)\";\n                        })\n                        .attr('class', 'gBarFood'),\n\n                    update => update.\n                        attr(\"transform\", (d: any) => {\n                            return \"translate(\" + bandScale(d[0]) + \",0)\";\n                        }),\n                    exit => exit\n                        .remove(),\n                )\n                .selectAll('rect')\n                .data((d: any) => {\n                    let R = ['Round 1', 'Round 2']\n                    if (d[0] == 'Urban') {\n                        R = ['Round U1', 'Round U2']\n                    }\n                    return R.map((key: any) => {\n                        return { key: key, value: d[1][key] };\n                    });\n                })\n                .join(\n                    enter => enter.append(\"rect\")\n                        .attr('class', (d) => {\n                            if ((d.key == 'Round U1') || (d.key == 'Round U2')) {\n                                return ('BarFoodGroupU')\n                            }\n                            else {\n                                return ('BarFoodGroup')\n                            }\n                        })\n                        .attr('id', (d) => 'BarFood' + d.key[d.key.length - 1])\n                        .attr('opacity', 0.9)\n                        .attr('width', (d) => {\n                            if ((d.key == 'Round U1') || (d.key == 'Round U2')) {\n                                return (xSubgroup2.bandwidth())\n                            }\n                            else {\n                                return (xSubgroup.bandwidth())\n                            }\n                        })\n                        //@ts-ignore\n                        .attr('x', (d: any) => {\n                            if ((d.key == 'Round U1') || (d.key == 'Round U2')) {\n                                return (xSubgroup2(d.key))\n                            }\n                            else {\n                                return (xSubgroup(d.key))\n                            }\n                        })\n                        .attr('y', (d: any) => {\n                            return (linearScale(d.value))\n                        })\n                        .call((s: any) => s.transition(t)\n                            .attr('height', (d: any) => {\n                                if (isNaN(d.value)) {\n                                    return (0)\n                                }\n                                return (Math.max(0, linearScale(linearScale.domain()[1] - d.value)))\n                            })),\n                    update => update\n                        .attr('width', (d) => {\n                            if ((d.key == 'Round U1') || (d.key == 'Round U2')) {\n                                return (xSubgroup2.bandwidth())\n                            }\n                            else {\n                                return (xSubgroup.bandwidth())\n                            }\n                        })\n                        //@ts-ignore\n                        .attr('x', (d: any) => {\n                            if ((d.key == 'Round U1') || (d.key == 'Round U2')) {\n                                return (xSubgroup2(d.key))\n                            }\n                            else {\n                                return (xSubgroup(d.key))\n                            }\n                        })\n                        .call((s: any) => s.transition(t)\n                            .attr('y', (d: any) => {\n                                return (linearScale(d.value))\n                            })\n                            .attr('height', (d: any) => {\n                                if (isNaN(d.value)) {\n                                    return (0)\n                                }\n                                return (Math.max(0, linearScale(linearScale.domain()[1] - d.value)))\n                            })\n                        ),\n                    exit => exit\n                        .transition().duration(650)\n                        .attr('height', 0)\n                        .remove(),\n                )\n        }\n        helper.highlightVertBar({\n            selection: g, bandScale: xSubgroup, linearScale: linearScale,\n            className: 'BarFoodGroup', margin: margin,\n            tooltipTable: tooltipFood, translate: bandScale('Rural')\n        })\n        helper.highlightVertBar({\n            selection: g, bandScale: xSubgroup2, linearScale: linearScale,\n            className: 'BarFoodGroupU', margin: margin,\n            tooltipTable: tooltipFood\n        })\n\n        legend = {\n            'Round 1': '#242424',\n            'Round 2': '#344a62',\n        }\n\n        helper.showLegend(legend, g)\n        g.selectAll('.legend')\n            .attr('transform', `translate(${bandScale.range()[1] - 130},${margin.top})`)\n\n        g.attr('transform', `translate(${margin.left},${margin.top})`)\n\n        let plotTitle = \"Clustered Bar Chart\"\n\n        const yLabel = 'Percentage (%)'\n\n        helper.plotTitle(g, innerWidth, plotTitle)\n        helper.showXAxis(xFoodAxis, g)\n        helper.showYAxis(yFoodAxis, g, innerHeight, innerWidth, yLabel, margin)\n    };\n\n    const activateFunctions: any = [];\n    let activeIndex = 0;\n    let lastIndex = -1;\n\n    const scrollVis = (index: number) => {\n\n        const g = d3.select('#MissedPaymentsSVG')\n        helper.generateElements([['legend', 1]], 'legend', g, 'g')\n\n        helper.createAxis(g, innerHeight)\n        activeIndex = index;\n        const sign = (activeIndex - lastIndex) < 0 ? -1 : 1;\n        const scrolledSections = [activeIndex]\n\n        scrolledSections.forEach(function (i) {\n            FoodClus();\n        });\n        lastIndex = activeIndex;\n\n        // (window.matchMedia(\"(max-width: 767px)\").matches) ?\n        //     set_openFilter('0vh') : set_openFilter('auto');\n    };\n    scrollVis(cardInd);\n\n    // const pan = d3.select('.' + section)\n\n    // useEffect(() => {\n\n    // \tif (isVisible) {\n    // \t\tpan.selectAll('.card')\n    // \t\t\t.style('opacity', function (d, i) { return i === cardInd ? 1 : 0.3; });\n\n    // \t\td3.select('#MissedPaymentsSVG')\n    // \t\t\t.style('opacity', 1);\n    // \t\tscrollVis(cardInd);\n    // \t} else {\n    // \t\tpan.selectAll('.card')\n    // \t\t\t.style('opacity', 0.4);\n\n    // \t\td3.select('#MissedPaymentsSVG')\n    // \t\t\t.style('opacity', 0.4);\n    // \t}\n    // \tset_graphic(999)\n    // }, [isVisible, cardInd, data, width, height, filter_Education, filter_RDD]);\n    // (height/0.72) * 2}px`\n    // return <div id='FoodClus' className=\"section\" style={{ width: `${width}`, height: `${(height + 120) * 2.2}px` }}>\n    // \t<div id='graphic' className={section} style={{ zIndex: graphicFilter }}>\n    // \t\t<div className=\"card\" >\n    // \t\t\t<div className=\"content\">\n    // \t\t\t\tAmong those households which were unable to buy essential food,\n    // \t\t\t\t74% state that they did not have the money to do so, while 17% cite that some\n    // \t\t\t\titems were more expensive than usual.\n\n    // \t\t\t</div>\n    // \t\t</div>\n    // \t</div>\n    // \t<div id='vis' style={{ height: height + 120 }}>\n    // \t\t<svg width={width} height={height + 20} >\n    // \t\t\t<g id=\"MissedPaymentsSVG\" />\n    // \t\t</svg>\n    // \t\t<div id=\"filter\" style={{ gridTemplateColumns: 'repeat(1, 1fr)', height: openFilter, width: width }}>\n    // \t\t\t<span className=\"close\" onClick={() => { set_openFilter('0vh'); set_graphic(999) }}>&times;</span>\n    // \t\t\t<filter.EduFilter set_filter={set_filterEducation} value={filter_Education} />\n    // \t\t\t{/* <filter.RDDFilter set_filter={set_filterRDD} value={filter_RDD} /> */}\n    // \t\t</div>\n    // \t\t<button className='Filter_Button' onClick={() => {\n    // \t\t\tif (openFilter == '0vh') {\n    // \t\t\t\tset_openFilter('20vh'); set_graphic(-1)\n    // \t\t\t} else {\n    // \t\t\t\tset_openFilter('0vh'); set_graphic(999)\n    // \t\t\t}\n    // \t\t}}>Filters</button>\n    // \t</div>\n    // </div>\n}\nexport default FoodClusFunc;","import React, { useEffect, useState } from 'react'\nimport * as d3 from 'd3'\nimport { max } from 'd3'\nimport * as helper from '../helperFunctions'\nimport * as panel from './panelData'\nimport * as filter from 'components/Filters/Filters'\nimport AreaEduFilter from 'components/Filters/AreaEdu'\nimport LockEffect from 'components/D3Panels/LockEffectFunc'\nimport FoodClus from 'components/D3Panels/Chapter2/FoodClusFunc'\n\ninterface P {\n\twidth: number\n\theight: number\n\tcardInd: number\n\tdata: RootReducerState['raw_data']\n\tisVisible: boolean\n\tsection: string\n}\n// const order: Record<string, string> = {\n// \t\"No bill missed\": 'Tick 1',\n// \t\"Electricity Bill\":'Tick 2',\n// \t\"Loan Payment (Informal)\":'Tick 3',\n// \t\"Rent\":'Tick 4',\n// \t\"Medical Bills\":'Tick 5',\n// \t\"School Fees\":'Tick 6',\n// \t\"Gas Bill\":'Tick 7',\n// \t\"Water Bill\":'Tick 8',\n// \t\"Phone Bill\":'Tick 9',\n// \t\"Loan Payment (bank)\":'Tick 10',\n// \t\"Ration/ Store loan from local general store\":'Tick 11',\n// }\nconst MissedPayments: React.FC<P> = ({ width, height, data, cardInd, isVisible, section }) => {\n\n\tconst margin = { top: 40, right: 20, bottom: 20, left: 65 }\n\tconst [filter_val, set_filter] = useState(\"Overall\")\n\tconst [filter_Comb, set_filterComb] = useState(\"None\")\n\tconst [filter_Education, set_filterEducation] = useState(\"None\")\n\tconst [filter_Round, set_filterRound] = useState(1)\n\tconst [filter_RDD, set_filterRDD] = useState(\"None\")\n\tconst [openFilter, set_openFilter] = useState('0vh')\n\tconst [graphicFilter, set_graphic] = useState(999)\n\n\tconst innerWidth = width - margin.left - margin.right\n\tconst innerHeight = height - margin.top - margin.bottom\n\n\tfunction MissedPayments(index: number) {\n\n\t\tif ((index === 0) || (index === 1)) {\n\n\t\t\tconst MissedPayments = panel.MissedPayments(data, filter_val, filter_Round, filter_Education, filter_RDD)\n\t\t\tlet job_n = Object.values(MissedPayments).reduce((a: number, b: number) => a + b, 0)\n\n\t\t\tconst tooltipMissedPayments: Record<string, Record<string, string>> = {}\n\t\t\tObject.keys(MissedPayments).forEach(e => {\n\t\t\t\ttooltipMissedPayments[e] = {\n\t\t\t\t\t'Value': (100 * MissedPayments[e] / job_n).toFixed(2) + '%',\n\t\t\t\t\t'Count': String(MissedPayments[e]),\n\t\t\t\t};\n\t\t\t})\n\t\t\tObject.keys(MissedPayments).forEach((e) => MissedPayments[e] = 100 * MissedPayments[e] / job_n)\n\n\t\t\tconst order_by_ordering = ([a1, k1]: [any, number], [a2, k2]: [any, number]) => k2 - k1\n\n\t\t\tconst g = d3.select('#MissedPaymentsSVG')\n\t\t\thelper.generateElements([], 'gBarFood', g)\n\n\t\t\tconst t = g.transition().duration(650);\n\n\t\t\tconst [linearScale, bandScale] = helper.generateAxis(Object.entries(MissedPayments).sort(order_by_ordering).map(([a, b]) => a),\n\t\t\t\t[0, Math.max(65, Number(max(Object.values(MissedPayments))))], [0, innerHeight], [0, innerWidth])\n\n\t\t\tbandScale.padding(0.2)\n\n\t\t\tconst xAxis = d3.axisBottom(linearScale)\n\t\t\tconst yAxis = d3.axisLeft(bandScale)\n\n\t\t\tlet passedData;\n\n\t\t\tlet plotTitle = \"\"\n\t\t\tif ((index === 0) || (index === 1)) {\n\t\t\t\tplotTitle = \"Horizontal Bar Chart\"\n\t\t\t\tif (index == 1) {\n\t\t\t\t\tplotTitle = 'Horizontal Bar Chart 2'\n\t\t\t\t}\n\t\t\t\tpassedData = Object.entries(MissedPayments).sort(order_by_ordering)\n\t\t\t\thelper.generateElements(passedData, 'BarGraph', g)\n\t\t\t\tg.selectAll('.BarGraph')\n\t\t\t\t\t.call(s => s.transition(t)\n\t\t\t\t\t\t.attr('y', (d: any) => bandScale(d[0]))\n\t\t\t\t\t\t.attr('height', bandScale.bandwidth())\n\t\t\t\t\t\t.attr('width', (d: any) => Math.max(0, linearScale(d[1])))\n\t\t\t\t\t\t.attr('x', 0)\n\t\t\t\t\t\t.delay((d, i) => (i * 60))\n\t\t\t\t\t)\n\n\t\t\t\thelper.highlightBar({\n\t\t\t\t\tselection: g, bandScale: bandScale, linearScale: linearScale,\n\t\t\t\t\tclassName: 'BarGraph', margin: margin,\n\t\t\t\t\ttooltipTable: tooltipMissedPayments\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tconst xLabel = 'Percentage (%)';\n\t\t\tconst yLabel = 'Y-Label';\n\n\t\t\thelper.plotTitle(g, innerWidth, plotTitle, -15)\n\t\t\thelper.showXAxis(xAxis, g, innerHeight, innerWidth, xLabel)\n\t\t\thelper.showYAxis(yAxis, g, innerHeight, innerWidth, yLabel, margin)\n\n\t\t\tg.transition().duration(650)\n\t\t\t\t.attr('transform', `translate(${margin.left},${margin.top})`)\n\t\t}\n\t\telse if (index == 2) {\n\t\t\tLockEffect({\n\t\t\t\tfilter_Education: filter_Education, filter_RDD: filter_RDD,\n\t\t\t\tfilter_Round: filter_Round, filter_val: filter_val, width: width,\n\t\t\t\theight: height, cardInd: cardInd, data: data\n\t\t\t})\n\t\t}\n\t\telse if (index > 2) {\n\t\t\tFoodClus({\n\t\t\t\tfilter_Education: filter_Education, filter_RDD: filter_RDD,\n\t\t\t\twidth: width, height: height, cardInd: cardInd, data: data\n\t\t\t})\n\t\t}\n\t};\n\n\tlet activeIndex = 0;\n\tlet lastIndex = -1;\n\n\tconst scrollVis = (index: number) => {\n\n\t\tconst g = d3.select('#MissedPaymentsSVG')\n\n\t\thelper.createAxis(g, innerHeight)\n\t\tactiveIndex = index;\n\t\tconst sign = (activeIndex - lastIndex) < 0 ? -1 : 1;\n\t\tconst scrolledSections = [activeIndex]\n\n\t\tscrolledSections.forEach(function (i) {\n\t\t\tMissedPayments(i);\n\t\t});\n\t\tlastIndex = activeIndex;\n\n\t\t(window.matchMedia(\"(max-width: 767px)\").matches) ?\n\t\t\tset_openFilter('0vh') : set_openFilter('auto');\n\t};\n\n\tconst pan = d3.select('.' + section)\n\n\tuseEffect(() => {\n\t\tif (cardInd === 1) {\n\t\t\tset_filterRound(2)\n\t\t}\n\t\telse {\n\t\t\tset_filterRound(1)\n\t\t}\n\t\tset_filterRDD(\"None\")\n\t\tset_filterComb('None')\n\t}, [cardInd, isVisible]);\n\n\tuseEffect(() => {\n\t\tset_filter('Overall')\n\t\tset_filterEducation('None')\n\t\tif (filter_Comb != 'None') {\n\n\t\t\tif ((filter_Comb == 'Rural') || (filter_Comb == 'Urban')) {\n\t\t\t\tset_filter(filter_Comb)\n\t\t\t}\n\t\t\telse {\n\t\t\t\tset_filterEducation(filter_Comb)\n\t\t\t}\n\t\t}\n\t}, [filter_Comb]);\n\n\tuseEffect(() => {\n\t\tif (isVisible) {\n\t\t\tpan.selectAll('.card')\n\t\t\t\t.style('opacity', function (d, i) { return i === cardInd ? 1 : 0.3; });\n\n\t\t\td3.select('#MissedPaymentsSVG')\n\t\t\t\t.style('opacity', 1);\n\t\t\tscrollVis(cardInd);\n\t\t} else {\n\t\t\tpan.selectAll('.card')\n\t\t\t\t.style('opacity', 0.4);\n\n\t\t\td3.select('#MissedPaymentsSVG')\n\t\t\t\t.style('opacity', 0.4);\n\t\t}\n\t\tset_graphic(999)\n\t}, [isVisible, cardInd, width, height, data, filter_val, filter_Round, filter_Education, filter_RDD]);\n\n\treturn <div id='MissedPayments' className=\"section\" style={{ width: `${width}`, height: `${((height + 120) * 5) + 400}px` }}>\n\t\t<div id='graphic' className={section} style={{ zIndex: graphicFilter }}>\n\t\t\t<div className=\"card\" >\n\t\t\t\t<div className=\"content\">\n\t\t\t\t\tLorem ipsum dolor sit amet, consectetur adipiscing elit.\n\t\t\t\t\tDuis facilisis suscipit dui accumsan mattis.\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"card\" >\n\t\t\t\t<div className=\"content\">\n\t\t\t\t\tLorem ipsum dolor sit amet, consectetur adipiscing elit.\n\t\t\t\t\tDuis facilisis suscipit dui accumsan mattis.\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"card\" >\n\t\t\t\t<div className=\"content\">\n\t\t\t\t\tLorem ipsum dolor sit amet, consectetur adipiscing elit.\n\t\t\t\t\tDuis facilisis suscipit dui accumsan mattis.\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"card\" >\n\t\t\t\t<div className=\"content\">\n\t\t\t\t\tLorem ipsum dolor sit amet, consectetur adipiscing elit.\n\t\t\t\t\tDuis facilisis suscipit dui accumsan mattis.\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div id='vis' style={{ height: height + 120 }}>\n\t\t\t<svg width={width} height={height + 20} >\n\t\t\t\t<g id='MissedPaymentsSVG' />\n\t\t\t</svg>\n\t\t\t<div id=\"filter\" style={{ gridTemplateColumns: 'repeat(1, 1fr)', height: openFilter, width: width }}>\n\t\t\t\t<span className=\"close\" onClick={() => { set_openFilter('0vh'); set_graphic(999) }}>&times;</span>\n\t\t\t\t<AreaEduFilter set_filterAreaEdu={set_filterComb} value={filter_Comb} />\n\t\t\t\t{/* <filter.RoundFilter set_filter={set_filterRound} value={filter_Round} /> */}\n\t\t\t\t{/* <filter.RDDFilter set_filter={set_filterRDD} value={filter_RDD} /> */}\n\t\t\t</div>\n\t\t\t<button className='Filter_Button' onClick={() => {\n\t\t\t\tif (openFilter == '0vh') {\n\t\t\t\t\tset_openFilter('30vh'); set_graphic(-1)\n\t\t\t\t} else {\n\t\t\t\t\tset_openFilter('0vh'); set_graphic(999)\n\t\t\t\t}\n\t\t\t}}>Filters</button>\n\t\t</div>\n\t</div>\n}\n\nexport default MissedPayments;","import React, { useState } from 'react'\n\nconst HeaderTop: React.FC = () => {\n\n    return <div className=\"logo-header-logo\">\n        <div className='cerpHeader'  >\n            <img src={process.env.PUBLIC_URL + '/images/rahij.jpg'} alt=\"MISSING JPG\" />\n            <div className=\"navbar-brand\">\n                <h1>Rahij Gillani</h1>\n                <div className=\"header-buttons\">\n                    <ul className='header-list'>\n                        <li>\n                            <a>MEng, Systems Design Engineering</a>\n                            {/* <img src=\"https://upload.wikimedia.org/wikipedia/en/6/6e/University_of_Waterloo_seal.svg\" /> */}\n                        </li>\n                        <li className=\"divider\">|</li>\n                        <li>\n                            <a>BS, Computer Science</a>\n                            {/* <img src=\"https://or.lums.edu.pk/sites/default/files/styles/full_width/public/default_images/lums_logo_0.gif?itok=2MvUWtw_\" /> */}\n                        </li>\n                    </ul>\n                </div>\n            </div>\n            <div className='react-logo-main-cont'>\n                <p className=\"title-react-logo\">Made using React</p>\n                <div className=\"container-react-logo\">\n                    <span className=\"react-logo\">\n                        <span className=\"nucleo\"></span>\n                    </span>\n\n                </div>\n            </div>\n        </div>\n    </div>\n}\nexport default HeaderTop\n","import React, { useEffect, useState } from 'react'\nimport { Link } from 'react-router-dom';\nimport HeaderTop from './HeaderTop';\n\ninterface P {\n\ty: number\n\tVisibleInd: number,\n\tSectionInd: Record<string, number>,\n\topenNav: string,\n\tset_openNav: Function,\n\tNavBName: string,\n\tset_NavBName: Function\n}\n\nconst HeaderDashBoard: React.FC<P> = ({ y, VisibleInd, SectionInd, openNav, set_openNav, NavBName, set_NavBName }) => {\n\n\tconst [stickClass, set_NavSticky] = useState('topnav-container')\n\tconst [sticky, set_Sticky] = useState(Number.MAX_VALUE)\n\n\tuseEffect(() => {\n\t\tconst nav = document.getElementById('topnav-stick')\n\t\t//@ts-ignore\n\t\tset_Sticky(nav.offsetTop)\n\t}, [])\n\n\tuseEffect(() => {\n\t\tif (!window.matchMedia(\"(max-width: 767px)\").matches) {\n\t\t\tif (y >= sticky) {\n\t\t\t\tset_NavSticky(\"topnav-container-sticky\")\n\t\t\t} else {\n\t\t\t\tset_NavSticky(\"topnav-container\");\n\t\t\t}\n\t\t}\n\t})\n\n\treturn <div id={stickClass} className=\"header\">\n\t\t<HeaderTop />\n\t\t<div id='topnav-stick' className={stickClass}>\n\t\t\t<div className=\"topnav\" style={{ height: openNav }}>\n\t\t\t\t<Link to=\"/\"> Home</Link>\n\t\t\t\t<a className={String(VisibleInd === SectionInd['Income'])} href=\"#Income\">Line Charts</a>\n\t\t\t\t<a className={String(VisibleInd === SectionInd['MissedPayments'])} href=\"#MissedPayments\">Bar Charts</a>\n\t\t\t</div>\n\t\t</div>\n\t\t<div id={NavBName} className='Nav_Button' onClick={() => {\n\t\t\tif (openNav == '0vh') { set_openNav('20vh'); set_NavBName('Close') }\n\t\t\telse { set_openNav('0vh'); set_NavBName('Navigation') }\n\t\t}}>\t<div className='Burger'></div>\n\t\t\t<div className='Burger2'></div>\n            <div className='Burger3'></div>\n\t\t</div>\n\t</div>\n\n}\nexport default HeaderDashBoard\n","\nimport React from 'react'\n\ninterface P {\n\tloading: boolean\n}\nconst Loading: React.FC<P> = ({ loading }) => {\n\n\treturn <div className='loading'>\n\t\t{loading &&\n\t\t\t<div className=\"sk-chase\">\n\t\t\t\t<div className=\"sk-chase-dot\"></div>\n\t\t\t\t<div className=\"sk-chase-dot\"></div>\n\t\t\t\t<div className=\"sk-chase-dot\"></div>\n\t\t\t\t<div className=\"sk-chase-dot\"></div>\n\t\t\t\t<div className=\"sk-chase-dot\"></div>\n\t\t\t\t<div className=\"sk-chase-dot\"></div>\n\t\t\t</div>}\n\t\t{!loading && <div className=\"scrollArrow\">\n\t\t\t<div className=\"chevron\"></div>\n\t\t\t<div className=\"chevron\"></div>\n\t\t\t<div className=\"chevron\"></div>\n\t\t\t<div className=\"scrollDownText\">Scroll Down</div>\n\t\t</div>}\n\t</div>\n}\nexport default Loading;","import React, { useEffect, useState } from 'react'\nimport * as d3 from 'd3'\nimport { connect } from 'react-redux'\nimport { getRawData } from 'actions'\nimport Income from 'components/D3Panels/Chapter1/Income'\nimport scroller from 'pages/d3-main/scroller'\nimport './style.css'\nimport MissedPayments from 'components/D3Panels/Chapter1/MissedPayments'\nimport HeaderDashBoard from 'components/Header/HeaderDashBoard'\nimport Loading from 'components/Header/Loading'\n\ntype P = {\n\traw_data: RootReducerState['raw_data'];\n\tloading: RootReducerState['loading'];\n\tgetRaw: () => void;\n};\nconst MainComponent: React.FunctionComponent<P> = ({ loading, getRaw, raw_data }) => {\n\n\tconst [openNav, set_openNav] = useState('25vh')\n\tconst [NavBName, set_NavBName] = useState('Navigation')\n\t// This Height and width paramerters passed to the components is the\n\t// height and width we want our svg graph to be.\n\tconst [height, setHeight] = useState(window.innerHeight - 210)\n\tconst [width, setWidth] = useState(window.innerWidth * 0.75)\n\tconst [y, setY] = useState(250)\n\tconst [VisibleInd, setVisibleInd] = useState(-1)\n\tconst [orient, setOrient] = useState('0')\n\tconst section = ['Section_0', 'Section_1']\n\tconst [cardInd, setCardInd] = useState([-1, -1, -1]);\n\n\t//SectionInd MUST be in same Order as Order of Sections in d3-main div below\n\tconst SectionInd: Record<string, number> = {\n\t\t'Income': 0,\n\t\t'MissedPayments': 0,\n\t}\n\n\tlet n = 0\n\tObject.keys(SectionInd).forEach(e => {\n\t\tSectionInd[e] = n\n\t\tn += 1\n\t})\n\n\tuseEffect(() => {\n\t\tgetRaw()\n\t}, []);\n\n\tuseEffect(() => {\n\t\tsetY(window.pageYOffset)\n\t\tif (window.matchMedia(\"(max-width: 767px)\").matches) {\n\t\t\tset_openNav('0vh')\n\t\t\tif (window.matchMedia(\"(orientation: landscape)\").matches) {\n\t\t\t\tsetHeight(window.innerHeight - 190)\n\t\t\t}\n\t\t\telse {\n\t\t\t\tsetHeight(window.innerHeight - 190)\n\t\t\t}\n\t\t}\n\t\tif (window.matchMedia(\"(orientation: landscape)\").matches) {\n\t\t\tsetOrient('90')\n\t\t}\n\t}, [])\n\tuseEffect(() => {\n\n\t\tif (window.matchMedia(\"(max-width: 767px)\").matches) {\n\t\t\tsetWidth(window.innerWidth * 0.95)\n\t\t\tif (window.matchMedia(\"(orientation: landscape)\").matches) {\n\t\t\t\tif (orient != '90') {\n\t\t\t\t\tsetHeight(window.innerHeight - 190)\n\t\t\t\t\tsetOrient('90')\n\t\t\t\t}\n\t\t\t} else if (orient != '0') {\n\t\t\t\tsetHeight(window.innerHeight - 190)\n\t\t\t\tsetOrient('0')\n\t\t\t}\n\t\t} else {\n\t\t\tset_openNav('94px')\n\t\t}\n\t\twindow.onscroll = () => setY(window.pageYOffset);\n\t\twindow.onresize = () => {\n\t\t\tif (window.matchMedia(\"(max-width: 767px)\").matches) {\n\n\t\t\t\t// compare new height to old height\n\t\t\t\t// only update at 20% change\n\t\t\t\tsetWidth(window.innerWidth * 0.95)\n\t\t\t\tset_openNav('0vh')\n\t\t\t\tset_NavBName('Navigation')\n\t\t\t\tif ((window.innerHeight - (height + 190)) / (height + 190) > 0.05) {\n\t\t\t\t\tsetHeight(window.innerHeight - 190)\n\t\t\t\t}\n\t\t\t\telse if (((height + 190) - window.innerHeight) / (height + 190) > 0.30) {\n\t\t\t\t\tsetHeight(window.innerHeight - 190)\n\t\t\t\t}\n\t\t\t\t// setHeight(window.innerHeight * 0.7)\n\n\t\t\t} else {\n\t\t\t\t// The viewport is at least 768 pixels wide\n\t\t\t\tsetWidth(window.innerWidth * 0.75)\n\t\t\t\tsetHeight(window.innerHeight - 210)\n\t\t\t}\n\t\t}\n\n\t})\n\n\tuseEffect(() => {\n\t\tconst pan = d3.select('.d3-main')\n\t\tconst index: number = scroller(pan, pan.selectAll('.section'), y)\n\t\tsetVisibleInd(index)\n\n\t\tlet n = 0;\n\t\tsection.forEach((sec) => {\n\t\t\tconst pan = d3.select('.' + sec)\n\t\t\tlet temp = cardInd\n\t\t\ttemp[n] = scroller(pan, pan.selectAll('.card'), y)\n\t\t\tsetCardInd(temp)\n\t\t\tn += 1;\n\t\t})\n\t});\n\n\treturn (\n\t\t<div className=\"d3-main\">\n\t\t\t<HeaderDashBoard y={y} VisibleInd={VisibleInd} SectionInd={SectionInd} openNav={openNav} set_openNav={set_openNav} NavBName={NavBName} set_NavBName={set_NavBName} />\n\t\t\t<Loading loading={loading} />\n\t\t\t<div className='GraphsDiv' style={{ width: '100%', display: 'block' }}>\n\t\t\t\t<Income width={width} height={height} data={raw_data} cardInd={cardInd[SectionInd['Income']]} isVisible={VisibleInd === SectionInd['Income']} section={section[SectionInd['Income']]} />\n\t\t\t\t<MissedPayments width={width} height={height} data={raw_data} cardInd={cardInd[SectionInd['MissedPayments']]} isVisible={VisibleInd === SectionInd['MissedPayments']} section={section[SectionInd['MissedPayments']]} />\n\n\t\t\t</div>\n\n\t\t</div>\n\t);\n};\n\nexport default connect((state: RootReducerState) => ({\n\traw_data: state.raw_data,\n\tloading: state.loading\n}), (dispatch: Function) => ({\n\tgetRaw: () => dispatch(getRawData())\n}))(MainComponent)","import Syncr from '@cerp/syncr'\nimport { createLoginSucceed } from './core';\nimport { get_host } from 'config';\nimport { loadRawData } from 'utils/indexDB'\n\ntype Dispatch = (action: any) => any\ntype GetState = () => RootReducerState\n\nexport const LOADING_RAW_DATA = \"LOADING_RAW_DATA\"\nexport const GOT_RAW_DATA = \"GOT_RAW_DATA\"\n\nexport type RawDataAction = {\n\ttype: \"GOT_RAW_DATA\",\n\tdata: RawSurveyData\n}\n\nexport type LoadingAction = {\n\ttype: \"LOADING\",\n\tloading: boolean\n}\n\nexport const getRawData = () => (dispatch: Dispatch, getState: GetState) => {\n\n\tdispatch({\n\t\ttype: \"LOADING\",\n\t\tloading: true\n\t})\n\n\tlet data = require('data/evPort.json')\n\t// console.log('DATAdedee',(data['eva_raw']))\n\tlet res: RawSurveyData[] = data['eva_raw']\n\tconst retVal: RawSurveyData = Object.entries(res).reduce((agg: any, curr: any) => {\n\t\t// console.log('survey',(curr))\n\t\tagg[curr[1]['id']] = JSON.parse(curr[1]['survey'])\n\t\treturn agg\n\t}, {})\n\n\tdispatch({\n\t\ttype: GOT_RAW_DATA,\n\t\tdata: retVal\n\t})\n}\n\n// export const getRawData = () => (dispatch: Dispatch, getState: GetState) => {\n// \tdispatch({\n// \t\ttype: \"LOADING\",\n// \t\tloading: true\n// \t})\n// \tconst creds = localStorage.getItem(\"username_password\") || \"\"\n// \tconst host = get_host()\n// \tfetch(`https://${host}/raw`, {\n// \t\theaders: new Headers({\n// \t\t\t\"Authorization\": `Basic ${btoa(creds)}`\n// \t\t})\n// \t})\n// \t\t.then(res => res.json())\n// \t\t.then((chunks: RawSurveyData[]) => chunks.reduce<RawSurveyData>((agg, curr) => ({ ...agg, ...curr }), {}))\n// \t\t.then(data => dispatch({\n// \t\t\ttype: \"GOT_RAW_DATA\",\n// \t\t\tdata\n// \t\t}))\n// \t\t.catch(err => {\n// \t\t\tconsole.error(err)\n// \t\t\tlocalStorage.removeItem(\"username_password\")\n// \t\t\talert(\"error: \" + err)\n// \t\t\tsetTimeout(() => {\n// \t\t\t\twindow.location.reload()\n// \t\t\t}, 2000);\n// \t\t\tdispatch({\n// \t\t\t\ttype: \"LOADING\",\n// \t\t\t\tloading: false,\n// \t\t\t\terror: err\n// \t\t\t})\n// \t\t})\n// }\nexport const loadRawDataFromIDB = () => (dispatch: Dispatch, getState: GetState) => {\n\tloadRawData()\n\t\t.then((data) => {\n\t\t\tif (Object.values(data).length > 0) {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"GOT_RAW_DATA_FROM_IDB\",\n\t\t\t\t\tdata\n\t\t\t\t})\n\t\t\t}\n\t\t})\n\t\t.catch(error => {\n\t\t\tconsole.error('LoadRawDataIDb', error);\n\t\t})\n}\nexport const createLogin = (username: string, password: string, number: string) => (dispatch: Dispatch, getState: GetState, syncr: Syncr) => {\n\n\tconst state = getState();\n\n\tsyncr.send({\n\t\ttype: \"LOGIN\",\n\t\tclient_type: state.auth.client_type,\n\t\tclient_id: state.client_id,\n\t\tid: state.auth.id,\n\t\tpayload: {\n\t\t\tid: username,\n\t\t\tpassword\n\t\t}\n\t})\n\t\t.then((res: { token: string, sync_state: SyncState }) => {\n\t\t\tdispatch(createLoginSucceed(username, res.token, res.sync_state))\n\t\t})\n\t\t.catch(res => {\n\t\t\tconsole.error(res)\n\t\t\talert(\"login failed\" + JSON.stringify(res))\n\t\t})\n\n}","import React, { useEffect, useState } from 'react'\nimport { Link } from 'react-router-dom';\nimport HeaderTop from './HeaderTop'\n\ninterface P {\n    y: number\n    openNav: string,\n    set_openNav: Function,\n    NavBName: string,\n    set_NavBName: Function\n}\n\nconst Header: React.FC<P> = ({ y, openNav, set_openNav, NavBName, set_NavBName }) => {\n\n    const [stickClass, set_NavSticky] = useState('topnav-container')\n    const [sticky, set_Sticky] = useState(Number.MAX_VALUE)\n\n    useEffect(() => {\n        const nav = document.getElementById('topnav-stick')\n        //@ts-ignore\n        set_Sticky(nav.offsetTop)\n    }, [])\n\n    useEffect(() => {\n        if (!window.matchMedia(\"(max-width: 767px)\").matches) {\n            if (y >= sticky) {\n                set_NavSticky(\"topnav-container-sticky\")\n            } else {\n                set_NavSticky(\"topnav-container\");\n            }\n        } else {\n            set_NavSticky(\"topnav-container\");\n        }\n    })\n    // console.log('wtf', process.env.PUBLIC_URL)\n    const href = window.location.href\n    // console.log('wtf2', href)\n    return <div id={stickClass} className=\"header\">\n        <HeaderTop />\n        <div id='topnav-stick' className={stickClass}>\n            <div className=\"topnav\" style={{ height: openNav }}>\n                <Link className={String(href.includes('/'))} to=\"/\" href=\"#home\">\n                    <img src={process.env.PUBLIC_URL + '/images/home.svg'} alt='Missing png' style={{ filter: \"invert(1)\", height: \"20px\", width: \"20px\", padding: \"5px\" }}></img>\n                    Home\n                </Link>\n                {/* <Link className={String(href.includes('#projects'))} to=\"/rahijj\" href=\"#projects\" >\n                    <a href=\"#projects\">\n                        <img src={home} alt='Missing png' style={{ filter: \"invert(1)\", height: \"20px\", width: \"20px\", padding: \"5px\" }}></img>\n                    Projects\n                    </a>\n                </Link> */}\n                <Link className={String(href.includes('/resume'))} to=\"/resume\">\n                    <img src={process.env.PUBLIC_URL + '/images/res.png'} alt='Missing png'></img>\n                    Resume\n                </Link>\n                <a target=\"_blank\" href=\"https://www.linkedin.com/in/rgillani/\">\n                    <img src={process.env.PUBLIC_URL + '/images/lIn.png'} alt='Missing png'></img>\n                    LinkedIn\n                </a>\n\n                <a target=\"_blank\" href=\"https://github.com/rahijj\">\n                    <img src={process.env.PUBLIC_URL + '/images/gHub.png'} alt='Missing png' style={{ filter: \"invert(1)\", height: \"20px\", width: \"20px\", padding: \"5px\" }}></img>\n                     GitHub</a>\n                <Link to=\"/scroll-dash\"> <img src={process.env.PUBLIC_URL + '/images/d3.png'} alt='Missing png' style={{ height: \"20px\", width: \"20px\", padding: \"5px\" }}></img>\n                    <span style={{ textTransform: 'none' }} >\n                        D3.js - Demo</span></Link>\n\n            </div>\n        </div>\n        <div id={NavBName} className='Nav_Button' onClick={() => {\n            if (openNav == '0vh') { set_openNav('45vh'); set_NavBName('Close') }\n            else { set_openNav('0vh'); set_NavBName('Navigation') }\n        }}>\t<div className='Burger'></div>\n            <div className='Burger2'></div>\n            <div className='Burger3'></div>\n        </div>\n    </div >\n\n}\nexport default Header\n","import React, { useEffect, useState } from 'react'\nimport * as d3 from 'd3'\nimport { connect } from 'react-redux'\nimport Loading from 'components/Header/Loading'\nimport HeaderPort from 'components/Header/HeaderPort'\nimport About from 'pages/About'\nimport './style.css'\n\ntype P = {\n\tchildren: React.ReactNode;\n};\nconst MainComponent: React.FunctionComponent<P> = ({ children }) => {\n\n\tconst [openNav, set_openNav] = useState('25vh')\n\tconst [NavBName, set_NavBName] = useState('Navigation')\n\tconst [y, setY] = useState(0)\n\n\tconst navH = '70px'\n\tuseEffect(() => {\n\t\tif (window.matchMedia(\"(max-width: 767px)\").matches) {\n\t\t\tset_openNav('0vh')\n\t\t}\n\t\telse {\n\t\t\tset_openNav(navH)\n\t\t}\n\t\twindow.onscroll = () => setY(window.pageYOffset);\n\n\t}, [])\n\tuseEffect(() => {\n\t\twindow.onscroll = () => setY(window.pageYOffset);\n\n\t\tif (!window.matchMedia(\"(max-width: 767px)\").matches) {\n\t\t\tset_openNav(navH)\n\t\t}\n\t\twindow.onresize = () => {\n\t\t\tif (window.matchMedia(\"(max-width: 767px)\").matches) {\n\t\t\t\tset_openNav('0vh')\n\t\t\t\tset_NavBName('Navigation')\n\t\t\t}\n\t\t\telse {\n\t\t\t\tset_openNav(navH)\n\t\t\t}\n\t\t}\n\t})\n\n\treturn <>\n\t\t<div id='home' className=\"port-main\">\n\t\t\t<HeaderPort y={y} openNav={openNav} set_openNav={set_openNav} NavBName={NavBName} set_NavBName={set_NavBName} />\n\t\t\t{children}\n\t\t</div>\n\t</>\n};\n\nexport default MainComponent","import React, { Children, useState } from 'react'\nimport { Link } from 'react-router-dom';\n\nconst Projects: React.FC = () => {\n\n    return (\n        <div id=\"projects\" className=\"projects\">\n            <div className='about-title'>\n                <div className=\"react-reveal\" style={{ opacity: \"1\" }}>\n                    <span style={{ animationDuration: \"1000ms\" }}>P</span>\n                    <span style={{ animationDuration: \"1200ms\" }}>r</span>\n                    <span style={{ animationDuration: \"1400ms\" }}>o</span>\n                    <span style={{ animationDuration: \"1600ms\" }}>j</span>\n                    <span style={{ animationDuration: \"1800ms\" }}>e</span>\n                    <span style={{ animationDuration: \"2000ms\" }}>c</span>\n                    <span style={{ animationDuration: \"2200ms\" }}>t</span>\n                    <span style={{ animationDuration: \"2400ms\" }}>s</span>\n                    {/* <hr /> */}\n                </div>\n                <div className=\"proj-list react-reveal-ani\" >\n                    <div className='proj'>\n                        <div className=\"center\">\n                            <img src={process.env.PUBLIC_URL + '/images/cerp-logo.png'}></img>\n                            <h3>Economic Vulnerability Assessment</h3>\n                        </div>\n\n                        <div className=\"descrip\">\n                            The Economic Vulnerability Assessment is a series of phone surveys conducted\n                            by the Centre for Economic Research in Pakistan which examines the economic impact of COVID-19\n                            on households in Punjab. I am a part of the research team responsible for the analysis, and I was responsible\n                            for developing a scrollable dashboard which walks through some of the findings from the study,\n                            and enables exploration of the data by providing filters for each of its figures. I used the python notebook\n                            environment for the exploratory analysis, and then the <b>D3.js</b> library in JavaScript for the visualisations\n                            in the dashboard.<br></br>\n                            <a target=\"_blank\" href=\"https://drive.google.com/file/d/1UYyxrtIZAeW80sdcAeM7J-hiw-EubkhX/preview\" >\n                                <b>Click here for link to official Dashboard.</b>\n                            </a><br></br>\n                            <Link to=\"/scroll-dash\">\n                                <b >Click here for D3.js Demo.</b>\n                            </Link>\n                        </div>\n                    </div>\n                    <div className='proj'>\n                        <div className=\"center\">\n                            <img src={process.env.PUBLIC_URL + '/images/twittSent.jpeg'}></img>\n                            <h3>Twitter Sentiment Analysis</h3>\n                        </div>\n                        <div className=\"descrip\">\n                            One of the most popular communication tools today includes microblogging. Thousands\n                            of gigabytes of data is available on the internet, with users sharing their opinions on all\n                            aspects of their lives. This project focuses on the platform Twitter and aims to perform sentiment\n                            analysis on its tweets related to the current COVID-19 situation.&nbsp;\n                            <a target=\"_blank\" href=\"https://drive.google.com/file/d/1UYyxrtIZAeW80sdcAeM7J-hiw-EubkhX/preview\" >\n                                <b>Click here for full report.</b>\n                            </a>\n                        </div>\n                    </div>\n                </div>\n\n            </div>\n            {/* <div className=\"about-content\">\n                <div className='pdf'>\n                    <iframe src=\"https://drive.google.com/file/d/1UYyxrtIZAeW80sdcAeM7J-hiw-EubkhX/preview\" style={{ border: \"None\" }}></iframe>\n                </div>\n            </div> */}\n        </div >\n    )\n}\nexport default Projects\n","import React, { useEffect, Children, useState } from 'react'\n// import sent from 'Sentiment.pdf'\n//@ts-ignore\nimport Roll from 'react-reveal/Roll'\nimport MainComp from 'pages/port-main/index'\nimport Projects from './Projects'\n\nconst About: React.FC = () => {\n    // console.log('inAbout')\n\n    return (\n        <MainComp>\n            <div className=\"about-me\">\n                <div className='about-title'>\n                    <div className=\"react-reveal\" style={{ opacity: \"1\" }}>\n                        <span style={{ animationDuration: \"1000ms\" }}>A</span>\n                        <span style={{ animationDuration: \"1260ms\" }}>b</span>\n                        <span style={{ animationDuration: \"1410ms\" }}>o</span>\n                        <span style={{ animationDuration: \"1670ms\" }}>u</span>\n                        <span style={{ animationDuration: \"1820ms\" }}>t</span>\n                        {/* <hr /> */}\n                    </div>\n                </div>\n                <div className=\"about-content\">\n                    <p className=\"react-reveal\">\n                        Hi I'm <b>Rahij</b>, a <b>software engineer</b> from <b>Waterloo, ON. </b>\n                        I'll be graduating in <b>December 2020</b> with a Masters degree in Systems Design Engineering\n                        (ML specialization) from the University of Waterloo. I'm currently looking\n                        for <b>full-time</b> roles in Ontario, Canada.\n                    </p>\n                    {/* <div className='pdf'>\n                        <iframe src=\"https://drive.google.com/file/d/1W5AoMhlPCYM4qzSBPW7DyvysusSEXAS2/preview\" style={{ border: \"None\" }}></iframe>\n                    </div> */}\n                </div>\n                <Projects />\n            </div >\n        </MainComp>\n    )\n}\nexport default About\n","import React, { Children, useState } from 'react'\nimport MainComp from 'pages/port-main/index'\n\nconst Resume: React.FC = () => {\n\n    return (\n        <MainComp>\n            <div className=\"about-me\">\n                <div className='about-title'>\n                    <h1>\n                        <div className=\"react-reveal\" style={{ opacity: \"1\" }}>\n                            <span style={{ animationDuration: \"1000ms\" }}>R</span>\n                            <span style={{ animationDuration: \"1260ms\" }}>e</span>\n                            <span style={{ animationDuration: \"1410ms\" }}>s</span>\n                            <span style={{ animationDuration: \"1670ms\" }}>u</span>\n                            <span style={{ animationDuration: \"1820ms\" }}>m</span>\n                            <span style={{ animationDuration: \"2082ms\" }}>e</span>\n                        </div>\n                    </h1>\n\n                </div>\n                <div className=\"about-content\">\n                    <div className='holds-the-iframe'>\n                        <iframe src=\"https://drive.google.com/file/d/1UYyxrtIZAeW80sdcAeM7J-hiw-EubkhX/preview\" style={{ border: \"None\" }}></iframe>\n                    </div>\n\n                </div>\n            </div >\n        </MainComp>\n    )\n}\nexport default Resume\n","import * as React from 'react'\nimport { Provider } from 'react-redux'\n// import { BrowserRouter, Route, Switch } from 'react-router-dom'\nimport { HashRouter as Router, Route, Switch } from 'react-router-dom'\nimport { Store } from 'redux'\nimport { connect } from 'react-redux'\n\nimport ErrorComponent from 'components/Error'\n\nimport MainPage from './pages/d3-main'\nimport MainTemp from './pages/port-main'\nimport About from './pages/About'\nimport Resume from './pages/Resume'\n// import MainPage from'./pages/main'\nimport { submitError } from 'actions/core'\n\ninterface P {\n\tstore: Store\n\tsendError: (err: Error, errInfo: React.ErrorInfo) => void\n}\n\ninterface S {\n\terror?: {\n\t\terr: Error\n\t\terrInfo: React.ErrorInfo\n\t}\n}\n\nclass Routes extends React.Component<P, S> {\n\n\tconstructor(props: P) {\n\t\tsuper(props)\n\n\t\tthis.state = {\n\t\t\terror: undefined\n\t\t}\n\t}\n\n\tcomponentDidCatch(err: Error, errInfo: React.ErrorInfo) {\n\n\t\tthis.props.sendError(err, errInfo)\n\n\t\tthis.setState({\n\t\t\terror: {\n\t\t\t\terr,\n\t\t\t\terrInfo\n\t\t\t}\n\t\t})\n\n\t}\n\n\trender() {\n\t\tconst store = this.props.store\n\n\t\tif (this.state.error) {\n\t\t\treturn <ErrorComponent error={this.state.error.err} errInfo={this.state.error.errInfo} />\n\t\t}\n\n\t\treturn <Provider store={store}>\n\t\t\t{/* <BrowserRouter> */}\n\t\t\t<Router>\n\n\t\t\t\t<Switch>\n\t\t\t\t\t<Route exact path=\"/\" component={About} />\n\t\t\t\t\t<Route exact path=\"/resume\" component={Resume} />\n\t\t\t\t\t<Route exact path=\"/scroll-dash\" component={MainPage} />\n\t\t\t\t\t{/* <Route exact path=\"/rahijj\" component={MainTemp} /> */}\n\n\t\t\t\t</Switch>\n\t\t\t</Router>\n\t\t\t{/* </BrowserRouter> */}\n\n\t\t</Provider>\n\n\t}\n}\n\nexport default connect(\n\t(state: RootReducerState) => ({}),\n\t(dispatch: Function) => ({\n\t\tsendError: (err: Error, errInfo: React.ErrorInfo) => dispatch(submitError(err, errInfo))\n\t})\n)(Routes)\n","import Syncr from '@cerp/syncr'\n\ntype GetState = () => RootReducerState\ntype Dispatch = (a: any) => any\n\nconst SYNC = \"SYNC\"\n\n// TODO: separate out connect, auth merges and deletes into separate folder\nexport const MERGES = \"MERGES\"\n\ninterface Merge {\n\tpath: string[],\n\tvalue: any\n}\n\nexport interface MergeAction {\n\ttype: \"MERGES\",\n\tmerges: Merge[]\n}\n\nexport const createMerges = (merges: Merge[]) => (dispatch: Dispatch, getState: GetState, syncr: Syncr) => {\n\t// merges is a list of path, value\n\n\tconst action = {\n\t\ttype: MERGES,\n\t\tmerges\n\t}\n\n\tdispatch(action)\n\n\tconst new_merges = merges.reduce((agg, curr) => ({\n\t\t...agg,\n\t\t[curr.path.join(',')]: {\n\t\t\taction: {\n\t\t\t\ttype: \"MERGE\",\n\t\t\t\tpath: curr.path.map(p => p === undefined ? \"\" : p),\n\t\t\t\tvalue: curr.value\n\t\t\t},\n\t\t\tdate: new Date().getTime()\n\t\t}\n\t}), {})\n\n\tconst state = getState();\n\tconst rationalized_merges = { ...state.queued, ...new_merges }\n\n\tconst payload = {\n\t\ttype: SYNC,\n\t\tid: state.auth.id,\n\t\tclient_type: state.auth.client_type,\n\t\tlast_snapshot: state.last_snapshot,\n\t\tpayload: rationalized_merges\n\t}\n\n\tsyncr.send(payload)\n\t\t.then(dispatch)\n\t\t.catch(err => dispatch(QueueUp(new_merges)))\n}\n\nexport const SMS = \"SMS\"\nexport const sendSMS = (text: string, number: string) => (dispatch: Dispatch, getState: GetState, syncr: Syncr) => {\n\n\t// should i keep a log of all messages sent in the db?\n\n\tconst state = getState();\n\tsyncr.send({\n\t\ttype: SMS,\n\t\tclient_type: state.auth.client_type,\n\t\tid: state.auth.id,\n\t\tpayload: {\n\t\t\ttext,\n\t\t\tnumber,\n\t\t}\n\t})\n\t\t.then(dispatch)\n\t\t.catch((err: Error) => console.error(err)) // this should backup to sending the sms via the android app?\n}\n\n\nexport const BATCH_SMS = \"BATCH_SMS\"\ninterface SMS {\n\ttext: string,\n\tnumber: string\n}\n\nexport const sendBatchSMS = (messages: SMS[]) => (dispatch: Dispatch, getState: GetState, syncr: Syncr) => {\n\n\tconst state = getState();\n\tsyncr.send({\n\t\ttype: BATCH_SMS,\n\t\tclient_type: state.auth.client_type,\n\t\tid: state.auth.id,\n\t\tpayload: {\n\t\t\tmessages\n\t\t}\n\t})\n\t\t.catch((err: Error) => {\n\t\t\tconsole.error(err) // send via android app?\n\t\t})\n}\n\ninterface ServerAction {\n\ttype: string,\n\tpayload: any\n}\n\nexport const sendServerAction = (action: ServerAction) => (dispatch: Dispatch, getState: GetState, syncr: Syncr) => {\n\tconst state = getState();\n\n\tconsole.log('send server action...', action)\n\treturn syncr.send({\n\t\ttype: action.type,\n\t\tclient_type: state.auth.client_type,\n\t\tclient_id: state.client_id,\n\t\tid: state.auth.id,\n\t\tpayload: action.payload\n\t})\n\t\t.then(dispatch)\n\t\t.catch((err: Error) => {\n\t\t\tconsole.error(err)\n\t\t})\n\n\t// should it get queued up....\n}\n\nexport const DELETES = \"DELETES\"\ninterface Delete {\n\tpath: string[]\n}\n\nexport interface DeletesAction {\n\ttype: \"DELETES\",\n\tpaths: Delete[]\n}\n\nexport const createDeletes = (paths: Delete[]) => (dispatch: Dispatch, getState: GetState, syncr: Syncr) => {\n\n\tconst action = {\n\t\ttype: DELETES,\n\t\tpaths\n\t}\n\n\tdispatch(action)\n\n\tconst state = getState();\n\tconst payload = paths.reduce((agg, curr) => ({\n\t\t...agg,\n\t\t[curr.path.join(',')]: {\n\t\t\taction: {\n\t\t\t\ttype: \"DELETE\",\n\t\t\t\tpath: curr.path.map(x => x === undefined ? \"\" : x),\n\t\t\t\tvalue: 1\n\t\t\t},\n\t\t\tdate: new Date().getTime()\n\t\t}\n\t}), {})\n\n\tconst rationalized_deletes = { ...state.queued, ...payload }\n\n\tsyncr.send({\n\t\ttype: SYNC,\n\t\tclient_type: state.auth.client_type,\n\t\tschool_id: state.auth.id,\n\t\tlast_snapshot: state.last_snapshot,\n\t\tpayload: rationalized_deletes\n\t})\n\t\t.then(dispatch)\n\t\t.catch((err: Error) => dispatch(QueueUp(payload)))\n\n}\n\n// this is only produced by the server.\n// it will tell us it hsa confirmed sync up to { date: timestamp }\nexport const CONFIRM_SYNC = \"CONFIRM_SYNC\"\nexport const CONFIRM_SYNC_DIFF = \"CONFIRM_SYNC_DIFF\"\nexport interface ConfirmSyncAction {\n\ttype: \"CONFIRM_SYNC_DIFF\",\n\tdate: number,\n\tnew_writes: Write[]\n}\n\nexport interface Write {\n\tdate: number,\n\tvalue: any,\n\tpath: string[],\n\ttype: \"MERGE\" | \"DELETE\",\n\tclient_id: string\n}\n\nexport const SNAPSHOT = \"SNAPSHOT\"\nexport const SNAPSHOT_DIFF = \"SNAPSHOT_DIFF\"\n\nexport interface SnapshotDiffAction {\n\tnew_writes: {\n\t\t[path_string: string]: {\n\t\t\ttype: \"MERGE\" | \"DELETE\",\n\t\t\tpath: string[],\n\t\t\tvalue?: any\n\t\t}\n\t}\n}\n\nexport const QUEUE = \"QUEUE\"\n// queue up an object where key is path, value is action/date\ninterface Queuable {\n\t[path: string]: {\n\t\taction: {\n\t\t\ttype: \"MERGE\" | \"DELETE\",\n\t\t\tpath: string[],\n\t\t\tvalue?: any\n\t\t},\n\t\tdate: number\n\t}\n}\n\nexport interface QueueAction {\n\ttype: \"QUEUE\",\n\tpayload: Queuable\n}\n\nexport const QueueUp = (action: Queuable) => {\n\treturn {\n\t\ttype: QUEUE,\n\t\tpayload: action\n\t}\n}\n\nexport const ON_CONNECT = \"ON_CONNECT\"\nexport const ON_DISCONNECT = \"ON_DISCONNECT\"\nexport const connected = () => (dispatch: Dispatch, getState: GetState, syncr: Syncr) => {\n\tconst action = { type: ON_CONNECT }\n\n\tdispatch(action)\n\n\tconst state = getState();\n\n\tif (state.auth.id && state.auth.token) {\n\t\tsyncr\n\t\t\t.send({\n\t\t\t\ttype: \"VERIFY\",\n\t\t\t\tclient_type: state.auth.client_type,\n\t\t\t\tpayload: {\n\t\t\t\t\tid: state.auth.id,\n\t\t\t\t\ttoken: state.auth.token,\n\t\t\t\t\tclient_id: state.client_id,\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(res => {\n\t\t\t\treturn syncr.send({\n\t\t\t\t\ttype: SYNC,\n\t\t\t\t\tclient_type: state.auth.client_type,\n\t\t\t\t\tid: state.auth.id,\n\t\t\t\t\tpayload: state.queued,\n\t\t\t\t\tlast_snapshot: state.last_snapshot\n\t\t\t\t})\n\t\t\t})\n\t\t\t.then(resp => {\n\t\t\t\tdispatch(resp)\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tconsole.error(err)\n\t\t\t\talert(\"Verification Failed: \" + JSON.stringify(err))\n\t\t\t})\n\t}\n}\n\nexport const submitError = (err: Error, errInfo: React.ErrorInfo) => (dispatch: Dispatch, getState: GetState, syncr: Syncr) => {\n\n\tconst state = getState();\n\n\tsyncr.send({\n\t\ttype: \"SUBMIT_ERROR\",\n\t\tclient_type: state.auth.client_type,\n\t\tid: state.auth && state.auth.id,\n\t\tpayload: {\n\t\t\terror: {\n\t\t\t\tname: err.name,\n\t\t\t\tmessage: err.message\n\t\t\t},\n\t\t\terrInfo: errInfo.componentStack,\n\t\t\tdate: new Date().getTime()\n\t\t}\n\t})\n\n}\n\nexport const disconnected = () => ({ type: ON_DISCONNECT })\n\nexport const LOGIN_FAIL = \"LOGIN_FAIL\"\nexport const createLoginFail = () => ({ type: LOGIN_FAIL })\n\nexport const LOGIN_SUCCEED = \"LOGIN_SUCCEED\"\nexport interface LoginSucceed {\n\ttype: \"LOGIN_SUCCEED\",\n\tid: string,\n\ttoken: string,\n\tsync_state: RootReducerState['sync_state'],\n}\n\nexport const createLoginSucceed = (id: string, token: string, sync_state: RootReducerState['sync_state']): LoginSucceed => ({\n\ttype: LOGIN_SUCCEED,\n\tid,\n\ttoken,\n\tsync_state\n})\n","import { v4 } from 'uuid';\n\nexport const saveDB = (db: RootReducerState) => {\n\n\ttry {\n\n\t\tsaveAuth(db.auth)\n\t\tsaveSyncState(db.sync_state);\n\t\tsaveSnapshot(db.last_snapshot);\n\t\tsaveQueue(db.queued)\n\t\t// saveRawData(db.raw_data)\n\t}\n\n\tcatch (err) {\n\t\tconsole.error(err);\n\t}\n}\n\nexport const clearDB = () => {\n\tlocalStorage.removeItem(\"auth\")\n\tlocalStorage.removeItem(\"sync_state\")\n\tlocalStorage.removeItem(\"last_snapshot\")\n\tlocalStorage.removeItem(\"school_db\")\n}\n\nexport const loadAuth = (): RootReducerState['auth'] => {\n\n\tlet init_auth: RootReducerState['auth'] = {\n\t\tid: undefined,\n\t\ttoken: undefined,\n\t\tclient_type: \"tech_demo\"\n\t};\n\n\ttry {\n\t\tconst str = localStorage.getItem(\"auth\")\n\t\tif (str === null) {\n\t\t\treturn init_auth;\n\t\t}\n\n\t\treturn JSON.parse(str);\n\t}\n\tcatch (err) {\n\t\tconsole.error(err);\n\t\treturn init_auth;\n\t}\n}\n\nexport const saveAuth = (auth: RootReducerState['auth']) => {\n\tlocalStorage.setItem(\"auth\", JSON.stringify(auth))\n}\n\nconst loadClientId = () => {\n\n\tconst client_id = localStorage.getItem(\"client_id\") || v4();\n\tlocalStorage.setItem(\"client_id\", client_id)\n\n\treturn client_id;\n}\n\nconst loadSyncState = (): RootReducerState['sync_state'] => {\n\n\tconst str = localStorage.getItem(\"sync_state\");\n\n\tif (str) {\n\t\tconst curr = JSON.parse(str) as RootReducerState['sync_state']\n\t\treturn curr;\n\t}\n\n\treturn {};\n\n}\n\nconst saveSyncState = (sync_state: RootReducerState['sync_state']) => {\n\n\tlocalStorage.setItem(\"sync_state\", JSON.stringify(sync_state));\n}\n\nconst saveQueue = (queue: RootReducerState['queued']) => {\n\n\tlocalStorage.setItem(\"queued\", JSON.stringify(queue))\n\n}\n\nconst saveRawData = (rd: RawSurveyData) => {\n\tlocalStorage.setItem(\"eva_raw_data\", JSON.stringify(rd))\n}\n\nconst loadRawData = (): RawSurveyData => {\n\tconst rd = localStorage.getItem(\"eva_raw_data\") || \"{}\"\n\n\treturn JSON.parse(rd) as RawSurveyData\n}\n\nconst loadQueue = () => {\n\treturn JSON.parse(localStorage.getItem(\"queued\") || \"{}\") as RootReducerState['queued']\n}\n\nconst saveSnapshot = (last_snapshot: number) => {\n\n\t//@ts-ignore\n\tlocalStorage.setItem(\"last_snapshot\", last_snapshot);\n}\n\nconst loadSnapshot = () => {\n\treturn parseInt(localStorage.getItem(\"last_snapshot\") || \"0\")\n}\n\nexport const loadDB = (): RootReducerState => {\n\n\treturn {\n\t\tclient_id: loadClientId(),\n\t\tauth: loadAuth(),\n\t\tqueued: loadQueue(),\n\t\taccept_snapshot: false,\n\t\tlast_snapshot: loadSnapshot(),\n\t\tconnected: false,\n\t\tsync_state: loadSyncState(),\n\t\tloading: true,\n\t\traw_data: {}// loadRawData()\n\t}\n}\n","import Dynamic from '@ironbay/dynamic'\n\nimport { MERGES, MergeAction, ON_CONNECT, ON_DISCONNECT, DELETES, DeletesAction, QueueAction, QUEUE, CONFIRM_SYNC_DIFF, ConfirmSyncAction, SnapshotDiffAction, SNAPSHOT_DIFF } from '../actions/core'\nimport { AnyAction, Reducer } from 'redux';\nimport { loadDB } from '../utils/localStorage';\nimport { GOT_RAW_DATA } from 'actions';\n\nconst rootReducer: Reducer<RootReducerState, AnyAction> = (state: RootReducerState | undefined, action: AnyAction): RootReducerState => {\n\n\t// this never actually gets called because we initialize state in our `createStore` call\n\tif (state === undefined) {\n\t\treturn loadDB()\n\t}\n\n\tconsole.log(action.type)\n\n\tswitch (action.type) {\n\n\t\tcase \"LOADING\":\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tloading: action.loading\n\t\t\t\t}\n\t\t\t}\n\n\t\tcase GOT_RAW_DATA:\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tloading: false,\n\t\t\t\t\traw_data: action.data\n\t\t\t\t}\n\t\t\t}\n\n\t\tcase \"GOT_RAW_DATA_FROM_IDB\":\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\traw_data: action.data\n\t\t\t\t}\n\t\t\t}\n\t\tcase ON_CONNECT:\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tconnected: true\n\t\t\t\t}\n\t\t\t}\n\n\t\tcase ON_DISCONNECT:\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tconnected: false\n\t\t\t\t}\n\t\t\t}\n\n\t\tcase MERGES:\n\t\t\t{\n\t\t\t\tconst nextState = (action as MergeAction).merges.reduce((agg, curr) => {\n\t\t\t\t\treturn Dynamic.put(agg, curr.path, curr.value)\n\t\t\t\t}, JSON.parse(JSON.stringify(state)))\n\n\t\t\t\treturn {\n\t\t\t\t\t...nextState,\n\t\t\t\t\taccept_snapshot: false\n\t\t\t\t}\n\t\t\t}\n\n\t\tcase DELETES:\n\t\t\t{\n\t\t\t\tconst state_copy = JSON.parse(JSON.stringify(state)) as RootReducerState\n\n\t\t\t\t(action as DeletesAction).paths.forEach(a => Dynamic.delete(state_copy, a.path))\n\n\t\t\t\treturn {\n\t\t\t\t\t...state_copy,\n\t\t\t\t\taccept_snapshot: false\n\t\t\t\t}\n\t\t\t}\n\n\t\tcase QUEUE:\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tqueued: {\n\t\t\t\t\t\t...state.queued,\n\t\t\t\t\t\t...(action as QueueAction).payload\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\tcase CONFIRM_SYNC_DIFF:\n\t\t\t{\n\t\t\t\tconst diff_action = action as ConfirmSyncAction\n\n\t\t\t\tconsole.log(\n\t\t\t\t\t\"confirm sync diff: \",\n\t\t\t\t\tObject.keys(diff_action.new_writes).length,\n\t\t\t\t\t\"changes synced\")\n\n\t\t\t\tconst newQ = Object.keys(state.queued)\n\t\t\t\t\t.filter(t => {\n\t\t\t\t\t\tconsole.log(state.queued[t].date, diff_action.date, state.queued[t].date - diff_action.date)\n\t\t\t\t\t\treturn state.queued[t].date > diff_action.date\n\t\t\t\t\t})\n\t\t\t\t\t.reduce((agg, curr) => {\n\t\t\t\t\t\treturn Dynamic.put(agg, [\"queued\", state.queued[curr].action.path], state.queued[curr].action)\n\t\t\t\t\t}, {})\n\n\t\t\t\tif (Object.keys(diff_action.new_writes).length > 0) {\n\t\t\t\t\tconst nextState = Object.values(diff_action.new_writes)\n\t\t\t\t\t\t.reduce((agg, curr) => {\n\t\t\t\t\t\t\tif (curr.type === \"DELETE\") {\n\t\t\t\t\t\t\t\treturn Dynamic.delete(agg, curr.path)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn Dynamic.put(agg, curr.path, curr.value)\n\t\t\t\t\t\t}, JSON.parse(JSON.stringify(state)))\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...nextState,\n\t\t\t\t\t\tqueued: newQ,\n\t\t\t\t\t\taccept_snapshot: true,\n\t\t\t\t\t\tlast_snapshot: new Date().getTime()\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tqueued: newQ,\n\t\t\t\t\taccept_snapshot: true,\n\t\t\t\t\tlast_snapshot: new Date().getTime()\n\t\t\t\t}\n\t\t\t}\n\n\t\tcase SNAPSHOT_DIFF:\n\t\t\t{\n\t\t\t\t//@ts-ignore\n\t\t\t\tconst snapshot = action as SnapshotDiffAction;\n\t\t\t\tconsole.log(\"snapshot diff: \", Object.keys(snapshot.new_writes).length, \"changes broadcast\")\n\n\t\t\t\tif (!state.accept_snapshot) {\n\t\t\t\t\treturn state;\n\t\t\t\t}\n\n\t\t\t\tif (Object.keys(snapshot.new_writes).length > 0) {\n\n\t\t\t\t\tconst nextState = Object.values(snapshot.new_writes)\n\t\t\t\t\t\t.reduce((agg, curr) => {\n\t\t\t\t\t\t\tif (curr.type === \"DELETE\") {\n\t\t\t\t\t\t\t\treturn Dynamic.delete(agg, curr.path)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn Dynamic.put(agg, curr.path, curr.value)\n\t\t\t\t\t\t}, JSON.parse(JSON.stringify(state))) as RootReducerState;\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...nextState,\n\t\t\t\t\t\tlast_snapshot: new Date().getTime()\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tlast_snapshot: new Date().getTime()\n\t\t\t\t}\n\t\t\t}\n\n\t\tdefault:\n\t\t\treturn state\n\t}\n\n}\n\nexport default rootReducer;","\nconst debounce = (f : Function, wait : number) : Function => {\n\n\tlet timeout : NodeJS.Timeout;\n\n\treturn (...args : any[]) => {\n\t\t//@ts-ignore\n\t\tconst fncall = () => f.apply(this, args);\n\n\t\tclearTimeout(timeout);\n\t\ttimeout = setTimeout(fncall, wait);\n\t}\n\n}\n\nexport default debounce;","import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\nimport { applyMiddleware, AnyAction, createStore, Store } from 'redux';\nimport thunkMiddleware, { ThunkMiddleware } from 'redux-thunk'\nimport Syncr from '@cerp/syncr'\n\nimport Routes from 'routes'\nimport reducer from 'reducers'\nimport { loadRawDataFromIDB } from 'actions/index'\nimport {saveRawData} from 'utils/indexDB'\nimport { loadDB, saveDB } from 'utils/localStorage'\nimport debounce from 'utils/debounce';\nimport { get_host } from 'config'\n\nimport { connected, disconnected } from 'actions/core'\n\n// const host = get_host()\n\nconst initial_state = loadDB()\n\n// const syncr = new Syncr(`wss://${host}/ws`)\n\n// @ts-ignore\n// syncr.on('connect', () => store.dispatch(connected()))\n// syncr.on('disconnect', () => store.dispatch(disconnected()))\n// syncr.on('message', (msg: AnyAction) => store.dispatch(msg))\n\nconst store: Store<RootReducerState> = createStore(\n\treducer,\n\tinitial_state,\n\tapplyMiddleware(thunkMiddleware as ThunkMiddleware<RootReducerState, AnyAction, Syncr>))\n\n//@ts-ignore\nstore.dispatch(loadRawDataFromIDB())\n\nconst saveBounce = debounce(() => {\n\tconst state = store.getState();\n\t// console.log('in save  DB', state)\n\tsaveDB(state)\n\tsaveRawData(state.raw_data)\n},0);\n\nstore.subscribe(saveBounce as () => void)\nReactDOM.render(<Routes store={store} />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register({\n\tonUpdate: (registration: ServiceWorkerRegistration) => {\n\t\tregistration.installing && registration.installing.postMessage({\n\t\t\ttype: \"SKIP_WAITING\"\n\t\t})\n\t}\n});"],"sourceRoot":""}